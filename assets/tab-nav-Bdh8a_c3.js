import{F as C,H as x,O as u,G as g,kW as p,kT as S,N as h,R as k,T as E,U as y,_ as O,X as W,Y as B,cl as z,a0 as L,Z as H,kX as w,a3 as A,c as F}from"./index-nBWeBKPv.js";import{a as R,b as D,d as P}from"./core-Bizuf87v.js";import{d as M}from"./button-CXWXhZac.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.7.1
 */const m={chevronRight:"chevron-right",chevronLeft:"chevron-left"},d={activeIndicatorContainer:"tab-nav-active-indicator-container",container:"tab-nav",containerHasEndTabTitleOverflow:"tab-nav--end-overflow",containerHasStartTabTitleOverflow:"tab-nav--start-overflow",scrollButton:"scroll-button",scrollButtonContainer:"scroll-button-container",scrollBackwardContainerButton:"scroll-button-container--backward",scrollForwardContainerButton:"scroll-button-container--forward",tabTitleSlotWrapper:"tab-titles-slot-wrapper"},$=':host{--calcite-internal-tab-nav-gradient-start-side:left;--calcite-internal-tab-nav-gradient-end-side:right;position:relative;display:flex}.scale-s{--calcite-internal-tab-nav-scroller-button-width:24px;min-block-size:1.5rem}.scale-m{--calcite-internal-tab-nav-scroller-button-width:32px;min-block-size:2rem}.scale-l{--calcite-internal-tab-nav-scroller-button-width:44px;min-block-size:2.75rem}.calcite--rtl{--calcite-internal-tab-nav-gradient-start-side:right;--calcite-internal-tab-nav-gradient-end-side:left}.tab-nav--start-overflow .tab-nav-active-indicator-container,.tab-nav--start-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%)}.tab-nav--end-overflow .tab-nav-active-indicator-container,.tab-nav--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%)}.tab-nav--start-overflow.tab-nav--end-overflow .tab-nav-active-indicator-container,.tab-nav--start-overflow.tab-nav--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%, transparent 51%), linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%, transparent 51%)}.tab-nav::-webkit-scrollbar{display:none;-ms-overflow-style:none;scrollbar-width:none}:host([layout=center]) ::slotted(calcite-tab-title){display:flex;flex-grow:1;flex-shrink:0;min-inline-size:auto;white-space:nowrap}:host([layout=center]) ::slotted(calcite-tab-title[selected]){overflow:unset}:host(:not([bordered])) .scale-l{--calcite-internal-tab-nav-gap:var(--calcite-size-xxl)}:host(:not([bordered])) .scale-m{--calcite-internal-tab-nav-gap:var(--calcite-size-xl)}:host(:not([bordered])) .scale-s{--calcite-internal-tab-nav-gap:var(--calcite-size-lg)}:host(:not([bordered])) .tab-titles-slot-wrapper{gap:var(--calcite-internal-tab-nav-gap)}:host([layout=center]:not([bordered])) .tab-titles-slot-wrapper{padding-inline:var(--calcite-spacing-xxl)}.tab-nav,.tab-titles-slot-wrapper{display:flex;inline-size:100%;justify-content:flex-start;overflow:hidden;white-space:nowrap}.tab-nav-active-indicator-container{position:absolute;inset-inline:0px;inset-block-end:0px;block-size:0.125rem;inline-size:100%;overflow:hidden}.tab-nav-active-indicator{position:absolute;inset-block-end:0px;display:block;block-size:0.125rem;background-color:var(--calcite-color-brand);transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;transition-timing-function:cubic-bezier(0, 0, 0.2, 1)}.scroll-button-container{position:absolute;inset-block:0px}.scroll-button-container calcite-button{--calcite-offset-invert-focus:1;--calcite-color-text-1:var(--calcite-color-text-3);block-size:100%}.scroll-button-container calcite-button:hover{--calcite-color-text-1:unset;--calcite-color-foreground-1:var(--calcite-color-transparent-hover);--calcite-color-foreground-3:var(--calcite-color-transparent)}.scroll-button-container--forward{inset-inline-end:0;z-index:var(--calcite-z-index)}.scroll-button-container--backward{inset-inline-start:0;z-index:var(--calcite-z-index)}:host(:not([bordered])) .scroll-button-container--backward::before,:host(:not([bordered])) .scroll-button-container--forward::before{background-color:var(--calcite-color-border-3);content:"";inline-size:var(--calcite-border-width-sm);inset-block-start:var(--calcite-border-width-md);inset-block-end:var(--calcite-border-width-md);position:absolute}:host(:not([bordered])) .scroll-button-container--backward::before{inset-inline-end:0}:host(:not([bordered])) .scroll-button-container--forward::before{inset-inline-start:0}:host .position-bottom .tab-nav-active-indicator{inset-block-end:unset;inset-block-start:0px}:host .position-bottom .tab-nav-active-indicator-container{inset-block-end:unset;inset-block-start:0px}:host([bordered]) .tab-nav-active-indicator-container{inset-block-end:unset}:host([bordered]) .position-bottom .tab-nav-active-indicator-container{inset-block-end:0;inset-block-start:unset}@media (forced-colors: active){.tab-nav-active-indicator{background-color:highlight}}:host([hidden]){display:none}[hidden]{display:none}',N=C(class extends x{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabChange=u(this,"calciteTabChange",6),this.calciteInternalTabChange=u(this,"calciteInternalTabChange",6),this.effectiveDir="ltr",this.lastScrollWheelAxis="x",this.resizeObserver=g("resize",()=>{this.updateScrollingState(),this.activeIndicatorEl&&this.updateActiveIndicator()}),this.onTabTitleWheel=t=>{t.preventDefault();const{deltaX:e,deltaY:i}=t,a=Math.abs(e),l=Math.abs(i);let n;a===l?n=this.lastScrollWheelAxis==="x"?e:i:a>l?(n=e,this.lastScrollWheelAxis="x"):(n=i,this.lastScrollWheelAxis="y");const s=(this.effectiveDir==="rtl"?-1:1)*n;t.currentTarget.scrollBy(s,0),requestAnimationFrame(()=>this.updateActiveIndicator())},this.onSlotChange=t=>{var i;(i=this.intersectionObserver)==null||i.disconnect(),t.target.assignedElements().forEach(a=>{var l;(l=this.intersectionObserver)==null||l.observe(a)})},this.storeContainerRef=t=>this.containerEl=t,this.storeTabTitleWrapperRef=t=>{this.tabTitleContainerEl=t,this.intersectionObserver=g("intersection",()=>this.updateScrollingState(),{root:t,threshold:[0,.5,1]})},this.scrollToTabTitles=t=>{p(()=>{const e=this.tabTitleContainerEl,i=e.getBoundingClientRect(),a=Array.from(this.el.querySelectorAll("calcite-tab-title")),{effectiveDir:l}=this;t==="forward"&&a.reverse();let n=null;if(a.forEach(s=>{const o=s.getBoundingClientRect(),r=i.x+i.width,c=o.x+o.width;t==="forward"&&l==="ltr"||t==="backward"&&l==="rtl"?(o.x>r||c>r&&o.x>i.x)&&(n=s):(c<i.x||c<r&&o.x<i.x)&&(n=s)}),n){const{scrollerButtonWidth:s}=this,o=t==="forward"&&l==="ltr"||t==="backward"&&l==="rtl"?-s:n.offsetWidth-e.clientWidth+s,r=n.offsetLeft+o;e.scrollTo({left:r,behavior:"smooth"})}})},this.scrollToNextTabTitles=()=>this.scrollToTabTitles("forward"),this.scrollToPreviousTabTitles=()=>this.scrollToTabTitles("backward"),this.handleTabFocus=(t,e,i)=>{const a=S(this.enabledTabTitles,e,i);this.scrollTabTitleIntoView(a,"instant"),t.stopPropagation()},this.onTabTitleScroll=()=>{this.updateActiveIndicator(),this.updateScrollingState()},this.renderScrollButton=t=>{const{bordered:e,messages:i,hasOverflowingStartTabTitle:a,hasOverflowingEndTabTitle:l,scale:n}=this,s=t==="end";return h("div",{class:{[d.scrollButtonContainer]:!0,[d.scrollBackwardContainerButton]:!s,[d.scrollForwardContainerButton]:s},hidden:s&&!l||!s&&!a,key:t},h("calcite-button",{appearance:e?"outline-fill":"transparent","aria-label":s?i.nextTabTitles:i.previousTabTitles,class:{[d.scrollButton]:!0},iconFlipRtl:"both",iconStart:s?m.chevronRight:m.chevronLeft,kind:"neutral",onClick:s?this.scrollToNextTabTitles:this.scrollToPreviousTabTitles,scale:n,tabIndex:-1}))},this.storageId=void 0,this.syncId=void 0,this.selectedTitle=null,this.scale="m",this.layout="inline",this.position="bottom",this.bordered=!1,this.indicatorOffset=void 0,this.indicatorWidth=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasOverflowingStartTabTitle=!1,this.hasOverflowingEndTabTitle=!1,this.selectedTabId=void 0}onMessagesChange(){}async selectedTabIdChanged(){localStorage&&this.storageId&&this.selectedTabId!==void 0&&this.selectedTabId!==null&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId}),this.selectedTitle=await this.getTabTitleById(this.selectedTabId)}selectedTitleChanged(){this.updateActiveIndicator()}connectedCallback(){var t;this.parentTabsEl=this.el.closest("calcite-tabs"),(t=this.resizeObserver)==null||t.observe(this.el),k(this),E(this)}async componentWillLoad(){const t=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(t)){const e=JSON.parse(localStorage.getItem(t));this.selectedTabId=e}await y(this)}componentDidLoad(){this.scrollTabTitleIntoView(this.selectedTitle,"instant")}componentWillRender(){const{parentTabsEl:t}=this;this.layout=t==null?void 0:t.layout,this.bordered=t==null?void 0:t.bordered,this.effectiveDir=O(this.el),this.selectedTitle&&this.updateActiveIndicator()}componentDidRender(){this.tabTitles.length&&this.tabTitles.every(t=>!t.selected)&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then(t=>{this.calciteInternalTabChange.emit({tab:t})})}disconnectedCallback(){var t;(t=this.resizeObserver)==null||t.disconnect(),W(this),B(this)}render(){const t=`${this.indicatorWidth}px`,e=`${this.indicatorOffset}px`,i=this.effectiveDir!=="rtl"?{width:t,left:e}:{width:t,right:e};return h(L,{role:"tablist"},h("div",{class:{[d.container]:!0,[d.containerHasStartTabTitleOverflow]:!!this.hasOverflowingStartTabTitle,[d.containerHasEndTabTitleOverflow]:!!this.hasOverflowingEndTabTitle,[`scale-${this.scale}`]:!0,[`position-${this.position}`]:!0,[z.rtl]:this.effectiveDir==="rtl"},ref:this.storeContainerRef},this.renderScrollButton("start"),h("div",{class:{[d.tabTitleSlotWrapper]:!0},onScroll:this.onTabTitleScroll,onWheel:this.onTabTitleWheel,ref:this.storeTabTitleWrapperRef},h("slot",{onSlotchange:this.onSlotChange})),h("div",{class:{[d.activeIndicatorContainer]:!0},ref:a=>this.activeIndicatorContainerEl=a},h("div",{class:"tab-nav-active-indicator",style:i,ref:a=>this.activeIndicatorEl=a})),this.renderScrollButton("end")))}focusPreviousTabHandler(t){this.handleTabFocus(t,t.target,"previous")}focusNextTabHandler(t){this.handleTabFocus(t,t.target,"next")}focusFirstTabHandler(t){this.handleTabFocus(t,t.target,"first")}focusLastTabHandler(t){this.handleTabFocus(t,t.target,"last")}internalActivateTabHandler(t){const e=t.target;this.selectedTabId=t.detail.tab?t.detail.tab:this.getIndexOfTabTitle(e),t.stopPropagation(),this.scrollTabTitleIntoView(e)}scrollTabTitleIntoView(t,e="smooth"){t&&p(()=>{const i=this.effectiveDir==="ltr",a=this.tabTitleContainerEl,l=a.getBoundingClientRect(),n=t.getBoundingClientRect(),s=a.scrollLeft,o=i?this.hasOverflowingStartTabTitle:this.hasOverflowingEndTabTitle,r=i?this.hasOverflowingEndTabTitle:this.hasOverflowingStartTabTitle;if(n.left<l.left+(o?this.scrollerButtonWidth:0)){const c=s+(n.left-l.left)-this.scrollerButtonWidth;a.scrollTo({left:c,behavior:e})}else if(n.right>l.right-(r?this.scrollerButtonWidth:0)){const c=s+(n.right-l.right)+this.scrollerButtonWidth;a.scrollTo({left:c,behavior:e})}})}activateTabHandler(t){this.calciteTabChange.emit(),t.stopPropagation()}internalCloseTabHandler(t){const e=t.target;this.handleTabTitleClose(e),t.stopPropagation()}updateTabTitles(t){t.target.selected&&(this.selectedTabId=t.detail)}globalInternalTabChangeHandler(t){this.syncId&&t.target!==this.el&&t.target.syncId===this.syncId&&this.selectedTabId!==t.detail.tab&&(this.selectedTabId=t.detail.tab),t.stopPropagation()}iconStartChangeHandler(){this.updateActiveIndicator()}effectiveLocaleChange(){H(this,this.effectiveLocale)}get scrollerButtonWidth(){const{scale:t}=this;return parseInt(t==="s"?R:t==="m"?D:P)}updateActiveIndicator(){var r,c,b,f,T,v;const t=(r=this.tabTitleContainerEl)==null?void 0:r.scrollLeft,e=(c=this.containerEl)==null?void 0:c.scrollLeft,i=(b=this.activeIndicatorContainerEl)==null?void 0:b.offsetWidth,a=(f=this.selectedTitle)==null?void 0:f.offsetLeft,l=(T=this.selectedTitle)==null?void 0:T.offsetWidth,n=i-a-l,s=this.effectiveDir==="ltr"?a:n,o=this.effectiveDir==="ltr"?-1:1;this.indicatorOffset=s+o*(e+t),this.indicatorWidth=(v=this.selectedTitle)==null?void 0:v.offsetWidth}updateScrollingState(){const t=this.tabTitleContainerEl;if(!t)return;let e,i;const a=t.scrollLeft,l=t.clientWidth,n=t.scrollWidth;this.effectiveDir==="ltr"?(e=a>0,i=a+l<n):(e=a<0,i=a!==-(n-l)),this.hasOverflowingStartTabTitle=e,this.hasOverflowingEndTabTitle=i}getIndexOfTabTitle(t,e=this.tabTitles){return e.indexOf(t)}async getTabTitleById(t){return Promise.all(this.tabTitles.map(e=>e.getTabIdentifier())).then(e=>this.tabTitles[e.indexOf(t)])}get tabTitles(){return w(this.el,"calcite-tab-title")}get enabledTabTitles(){return w(this.el,"calcite-tab-title:not([disabled])").filter(t=>!t.closed)}handleTabTitleClose(t){const{tabTitles:e}=this,i=t.selected,a=e.reduce((n,s,o)=>s.closed?n:[...n,o],[]),l=a.length;if(l===1&&e[a[0]].closable)e[a[0]].closable=!1,this.selectedTabId=a[0],i&&e[a[0]].activateTab();else if(l>1){const n=e.findIndex(o=>o===t),s=a.find(o=>o>n);this.selectedTabId===n&&(this.selectedTabId=s||l-1,e[this.selectedTabId].activateTab())}requestAnimationFrame(()=>{this.updateActiveIndicator(),e[this.selectedTabId].focus()})}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],selectedTabId:["selectedTabIdChanged"],selectedTitle:["selectedTitleChanged"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return $}},[1,"calcite-tab-nav",{storageId:[513,"storage-id"],syncId:[513,"sync-id"],selectedTitle:[1040],scale:[1],layout:[1537],position:[1],bordered:[1540],indicatorOffset:[1026,"indicator-offset"],indicatorWidth:[1026,"indicator-width"],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],hasOverflowingStartTabTitle:[32],hasOverflowingEndTabTitle:[32],selectedTabId:[32]},[[0,"calciteInternalTabsFocusPrevious","focusPreviousTabHandler"],[0,"calciteInternalTabsFocusNext","focusNextTabHandler"],[0,"calciteInternalTabsFocusFirst","focusFirstTabHandler"],[0,"calciteInternalTabsFocusLast","focusLastTabHandler"],[0,"calciteInternalTabsActivate","internalActivateTabHandler"],[0,"calciteTabsActivate","activateTabHandler"],[0,"calciteInternalTabsClose","internalCloseTabHandler"],[0,"calciteInternalTabTitleRegister","updateTabTitles"],[16,"calciteInternalTabChange","globalInternalTabChangeHandler"],[0,"calciteInternalTabIconChanged","iconStartChangeHandler"]],{messageOverrides:["onMessagesChange"],selectedTabId:["selectedTabIdChanged"],selectedTitle:["selectedTitleChanged"],effectiveLocale:["effectiveLocaleChange"]}]);function X(){if(typeof customElements>"u")return;["calcite-tab-nav","calcite-button","calcite-icon","calcite-loader"].forEach(t=>{switch(t){case"calcite-tab-nav":customElements.get(t)||customElements.define(t,N);break;case"calcite-button":customElements.get(t)||M();break;case"calcite-icon":customElements.get(t)||F();break;case"calcite-loader":customElements.get(t)||A();break}})}X();export{N as T,X as d};
