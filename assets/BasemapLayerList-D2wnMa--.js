function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/calcite-action-Dl3Ej-DA.js","assets/index-nBWeBKPv.js","assets/index-CIBc8SyM.css","assets/calcite-action-group-CkUylMOC.js","assets/action-group-gIzdD0OT.js","assets/calcite-action-menu-ClUy3ML1.js","assets/calcite-label-3DeI0toz.js","assets/calcite-input-B1P-4iHO.js","assets/input2-BBl3JTKq.js","assets/Validation-BNlJRDE1.js","assets/input-kBVpmtEZ.js","assets/input-message-BCRW2dJK.js","assets/progress-DvHi5Mrp.js","assets/calcite-button-DXncz_6_.js","assets/button-CXWXhZac.js","assets/calcite-flow-BzH9GbCF.js","assets/calcite-flow-item-COXozJS_.js","assets/panel-VvA-VWtX.js","assets/calcite-icon-DnteIGRp.js","assets/calcite-list-CinAE7We.js","assets/utils3-CW4gBV_0.js","assets/filter-Cyq-e8PA.js","assets/calcite-list-item-DyLWmkgR.js","assets/calcite-notice-Bn7NnyVR.js","assets/calcite-tooltip-D4ScpS1B.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{aO as Q,ro as D,eF as X,ar as T,P as A,rp as U,g as l,y as a,i as N,S as Y,es as Z,cw as z,oh as ee,cx as te,rq as ie,rr as C,rs as G,cy as se,aj as I,ol as M,aK as $,cz as o,o9 as P,rt as ne,ru as j,rv as le,rw as K,rx as ae,ry as re,rz as oe,rA as ce,rB as de,qq as me,rC as he}from"./index-nBWeBKPv.js";const v={view:"view",basemap:"basemap",baseLayers:"base-layers",referenceLayers:"reference-layers",baseLayersListMode:"reference-layers-list-mode",referenceLayersListMode:"base-layers-list-mode",baseLayerViews:"base-layer-views",referenceLayerViews:"reference-layer-views",children:"children"},R=Q.ofType(D);let w=class extends X.EventedAccessor{constructor(e){super(e),this.baseItems=new R,this.baseListItemCreatedFunction=null,this.checkPublishStatusEnabled=!1,this.referenceListItemCreatedFunction=null,this.referenceItems=new R,this.view=null,this._compileBaseList=this._compileBaseList.bind(this),this._compileReferenceList=this._compileReferenceList.bind(this)}initialize(){this.addHandles([T(()=>{var e,t,i,s;return[(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap,((i=this.view)==null?void 0:i.ready)===!0,(s=this.view)==null?void 0:s.basemapView]},()=>this._watchBasemapLayers(),A),T(()=>[this.baseListItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._baseListItemCreatedFunctionChanged()),T(()=>[this.referenceListItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._referenceListItemCreatedFunctionChanged())],v.view)}destroy(){this.view=null,this.baseItems.removeAll(),this.referenceItems.removeAll()}get basemapTitle(){var e,t,i;return((i=(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap)==null?void 0:i.title)??null}set basemapTitle(e){this._override("basemapTitle",e)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":this.view?"loading":"disabled"}get totalBaseItems(){return this.baseItems.flatten(e=>e.children).length}get totalReferenceItems(){return this.referenceItems.flatten(e=>e.children).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem({targetItem:e,fromParentItem:t,toParentItem:i,from:s,to:n,newIndex:c}){var H,q;const h=e==null?void 0:e.layer;if(!h||h.type==="subtype-sublayer")return;const r=(q=(H=this.view)==null?void 0:H.map)==null?void 0:q.basemap,m=r==null?void 0:r.baseLayers,g=r==null?void 0:r.referenceLayers,b=t?U(t):s==="base"?m:g,u=i?U(i):n==="base"?m:g;if(!b||!u)return;const{baseItems:f,referenceItems:p}=this,y=s==="base"?f:p,k=n==="base"?f:p,B=(t==null?void 0:t.children)||y,O=(i==null?void 0:i.children)||k,V=u.length-c;e.parent=i||null,B.remove(e),b.remove(h),O.includes(e)||O.add(e,V),u.includes(h)||u.add(h,V),this._compileLists()}_createItemChangeHandles({items:e,key:t,callback:i}){this.removeHandles(t),i(),e&&this.addHandles(e.on("change",()=>i()),t)}_createListItem({layer:e,type:t}){const{view:i,baseListItemCreatedFunction:s,referenceListItemCreatedFunction:n,checkPublishStatusEnabled:c}=this;return new D({layer:e,checkPublishStatusEnabled:c,listItemCreatedFunction:t==="base"?s:n,view:i})}_watchLayersListMode({layers:e,key:t,callback:i}){this.removeHandles(t),e&&e.forEach(s=>{this.addHandles(T(()=>s.listMode,()=>i()),t)})}_compileListItems({layers:e,items:t,key:i,type:s,callback:n}){this._watchLayersListMode({layers:e,key:i,callback:n}),this._createNewItems({type:s,items:t,layers:e}),this._removeItems({items:t,layers:e}),this._sortItems(t,e)}_compileReferenceList(){var i,s,n;const{referenceItems:e}=this,t=(n=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap)==null?void 0:n.referenceLayers;this._compileListItems({type:"reference",layers:t,items:e,key:v.referenceLayersListMode,callback:this._compileReferenceList})}_compileBaseList(){var i,s,n;const{baseItems:e}=this,t=(n=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap)==null?void 0:n.baseLayers;this._compileListItems({type:"base",layers:t,items:e,key:v.baseLayersListMode,callback:this._compileBaseList})}_compileLists(){this._compileReferenceList(),this._compileBaseList()}_createNewItems({items:e,layers:t,type:i}){t==null||t.forEach(s=>{e.some(n=>n.layer===s)||e.add(this._createListItem({type:i,layer:s}))})}_removeItems({items:e,layers:t}){e&&e.forEach(i=>{if(!i)return;(t==null?void 0:t.some(n=>i.layer===n))||(this.removeHandles(`${v.children}-${i.uid}`),e.remove(i))})}_sortItems(e,t){e&&t&&e.sort((i,s)=>{const n=t.indexOf(i.layer),c=t.indexOf(s.layer);return n>c?-1:n<c?1:0})}_removeAllBaseItems(){const{baseItems:e}=this;e.forEach(t=>{this.removeHandles(`${v.children}-${t.uid}`)}),e.removeAll()}_removeAllReferenceItems(){const{referenceItems:e}=this;e.forEach(t=>{this.removeHandles(`${v.children}-${t.uid}`)}),e.removeAll()}_baseListItemCreatedFunctionChanged(){this._removeAllBaseItems(),this._compileLists()}_referenceListItemCreatedFunctionChanged(){this._removeAllReferenceItems(),this._compileLists()}_watchBasemapLayers(){const{view:e}=this;if(this.removeHandles([v.baseLayers,v.referenceLayers,v.basemap,v.baseLayerViews,v.referenceLayerViews]),!(e!=null&&e.ready))return this._removeAllBaseItems(),void this._removeAllReferenceItems();this._compileLists(),this.addHandles([T(()=>{var t,i,s;return(s=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap)==null?void 0:s.baseLayers},t=>this._createItemChangeHandles({items:t,key:v.baseLayers,callback:this._compileBaseList}),A),T(()=>{var t,i,s;return(s=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap)==null?void 0:s.referenceLayers},t=>this._createItemChangeHandles({items:t,key:v.referenceLayers,callback:this._compileReferenceList}),A),T(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.basemapView)==null?void 0:i.baseLayerViews},t=>this._createItemChangeHandles({items:t,key:v.baseLayerViews,callback:this._compileBaseList}),A),T(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.basemapView)==null?void 0:i.referenceLayerViews},t=>this._createItemChangeHandles({items:t,key:v.referenceLayerViews,callback:this._compileReferenceList}),A)],v.basemap)}};l([a({type:R,readOnly:!0})],w.prototype,"baseItems",void 0),l([a()],w.prototype,"basemapTitle",null),l([a()],w.prototype,"baseListItemCreatedFunction",void 0),l([a()],w.prototype,"checkPublishStatusEnabled",void 0),l([a()],w.prototype,"referenceListItemCreatedFunction",void 0),l([a({type:R,readOnly:!0})],w.prototype,"referenceItems",void 0),l([a({readOnly:!0})],w.prototype,"state",null),l([a()],w.prototype,"totalBaseItems",null),l([a()],w.prototype,"totalReferenceItems",null),l([a()],w.prototype,"view",void 0),w=l([N("esri.widgets.BasemapLayerList.BasemapLayerListViewModel")],w);const W=w;let L=class extends Y{constructor(){super(...arguments),this.baseLayers=!0,this.closeButton=!1,this.collapseButton=!1,this.editTitleButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!0,this.referenceLayers=!0,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};l([a({type:Boolean,nonNullable:!0})],L.prototype,"baseLayers",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"closeButton",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"collapseButton",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"editTitleButton",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"errors",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"filter",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"flow",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"heading",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"referenceLayers",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"statusIndicators",void 0),l([a({type:Boolean,nonNullable:!0})],L.prototype,"temporaryLayerIndicators",void 0),L=l([N("esri.widgets.BasemapLayerList.BasemapLayerListVisibleElements")],L);const x=L,E="esri-basemap-layer-list",F=`${E}__item`,_={base:E,widgetIcon:Z.layers,filterNoResults:`${E}__filter-no-results`,item:F,itemActive:`${F}--active`,itemContent:`${F}-content`,itemContentBottom:`${F}-content-bottom`,itemMessage:`${F}-message`,itemInvisibleAtScale:`${F}--invisible-at-scale`,itemActionIcon:`${F}-action-icon`,itemActionImage:`${F}-action-image`,itemTemporaryIcon:`${F}-temporary-icon`,statusIndicator:`${E}__status-indicator`,publishing:`${E}__publishing`,updating:`${E}__updating`,editing:`${E}__editing`,connectionStatus:`${E}__connection-status`,connectionStatusConnected:`${E}__connection-status--connected`,visibleToggle:`${E}__visible-toggle`,visibleIcon:`${E}__visible-icon`,section:`${E}__section`},pe=Q.ofType(D),J="basemap",ue=".*\\S+.*";let d=class extends te{constructor(e,t){super(e,t),this._activeItem=null,this._tooltipReferenceMap=new Map,this._editTitleInput=null,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusEditingFlowItem=!1,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this.collapsed=!1,this.dragEnabled=!1,this.editingTitle=!1,this.filterPlaceholder="",this.baseFilterText="",this.referenceFilterText="",this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.headingLevel=2,this.iconClass=_.widgetIcon,this.messages=null,this.messagesCommon=null,this.minFilterItems=ie,this.selectedItems=new pe,this.selectionMode="none",this.viewModel=new W,this.visibilityAppearance="default",this.visibleElements=new x,this._canMove=({dragEl:i,fromEl:s,toEl:n},c)=>{var y,k,B;const h=c==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,r=C(i);if(!(r!=null&&r.sortable))return!1;const m=C(s),g=G(s),b=C(n),u=G(n),f=!!g&&!!u&&g===u,p={selected:r,from:m,to:b};return s.group&&n.group&&typeof h=="function"?h.call(null,p):f&&((y=r==null?void 0:r.layer)==null?void 0:y.type)!=="sublayer"&&((k=m==null?void 0:m.layer)==null?void 0:k.type)!=="map-image"&&((B=b==null?void 0:b.layer)==null?void 0:B.type)!=="map-image"},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=i=>{if(this.visibilityAppearance!=="default")return;const s=Array.from(i.composedPath()).find(n=>{var c;return(c=n.classList)==null?void 0:c.contains(_.item)});this._activeItem=C(s)},this._onCalciteListOrderChange=i=>{const{_lastDragDetail:s}=this,{toEl:n,fromEl:c,dragEl:h,newIndex:r}=i;if(!c||!n||(s==null?void 0:s.newIndex)===r&&(s==null?void 0:s.dragEl)===h&&(s==null?void 0:s.toEl)===n&&(s==null?void 0:s.fromEl)===c)return;this._lastDragDetail=i;const m=c,g=n;if(m!==g)this._moveLayerFromChildList({toEl:g,fromEl:m,dragEl:h,newIndex:r});else{const b=Array.from(c.children).filter(u=>u==null?void 0:u.matches("calcite-list-item")).map(u=>u.value);this._sortLayers(m,b)}}}normalizeCtorArgs(e){return(e==null?void 0:e.editingEnabled)!=null&&e.visibleElements!=null?{...e,visibleElements:new x({...e.visibleElements,editTitleButton:e.editingEnabled})}:e}loadDependencies(){return se({action:()=>I(()=>import("./calcite-action-Dl3Ej-DA.js"),__vite__mapDeps([0,1,2])),"action-group":()=>I(()=>import("./calcite-action-group-CkUylMOC.js"),__vite__mapDeps([3,4,1,2])),"action-menu":()=>I(()=>import("./calcite-action-menu-ClUy3ML1.js"),__vite__mapDeps([5,1,2])),block:()=>I(()=>import("./index-nBWeBKPv.js").then(e=>e.HD),__vite__mapDeps([1,2])),label:()=>I(()=>import("./calcite-label-3DeI0toz.js"),__vite__mapDeps([6,1,2])),input:()=>I(()=>import("./calcite-input-B1P-4iHO.js"),__vite__mapDeps([7,8,1,2,9,10,11,12])),button:()=>I(()=>import("./calcite-button-DXncz_6_.js"),__vite__mapDeps([13,14,1,2])),flow:()=>I(()=>import("./calcite-flow-BzH9GbCF.js"),__vite__mapDeps([15,1,2])),"flow-item":()=>I(()=>import("./calcite-flow-item-COXozJS_.js"),__vite__mapDeps([16,1,2,17])),icon:()=>I(()=>import("./calcite-icon-DnteIGRp.js"),__vite__mapDeps([18,1,2])),list:()=>I(()=>import("./calcite-list-CinAE7We.js"),__vite__mapDeps([19,1,2,20,21,8,9,10,11,12])),"list-item":()=>I(()=>import("./calcite-list-item-DyLWmkgR.js"),__vite__mapDeps([22,1,2,20])),notice:()=>I(()=>import("./calcite-notice-Bn7NnyVR.js"),__vite__mapDeps([23,1,2])),tooltip:()=>I(()=>import("./calcite-tooltip-D4ScpS1B.js"),__vite__mapDeps([24,1,2]))})}destroy(){this._tooltipReferenceMap.clear()}get _baseFilterEnabled(){return this.viewModel.totalBaseItems>=this.minFilterItems&&this.visibleElements.filter}get _referenceFilterEnabled(){return this.viewModel.totalReferenceItems>=this.minFilterItems&&this.visibleElements.filter}get basemapTitle(){return this.viewModel.basemapTitle}set basemapTitle(e){this.viewModel.basemapTitle=e}get baseListItemCreatedFunction(){return this.viewModel.baseListItemCreatedFunction}set baseListItemCreatedFunction(e){this.viewModel.baseListItemCreatedFunction=e}get editingEnabled(){return M($.getLogger(this),"editingEnabled",{replacement:"selectionMode, dragEnabled, visibleElements.editTitleButton",version:"4.29",warnOnce:!0}),this.selectionMode!=="none"&&this.dragEnabled&&this.visibleElements.editTitleButton}set editingEnabled(e){M($.getLogger(this),"editingEnabled",{replacement:"selectionMode, dragEnabled, visibleElements.editTitleButton",version:"4.29",warnOnce:!0}),this.dragEnabled=e,this.visibleElements.editTitleButton=e,this.selectionMode=e?this.multipleSelectionEnabled?"multiple":"single":"none"}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get multipleSelectionEnabled(){return M($.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode==="multiple"}set multipleSelectionEnabled(e){M($.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode=e?"multiple":this.editingEnabled?"single":"none"}get referenceListItemCreatedFunction(){return this.viewModel.referenceListItemCreatedFunction}set referenceListItemCreatedFunction(e){this.viewModel.referenceListItemCreatedFunction=e}get baseItems(){return this.viewModel.baseItems}get referenceItems(){return this.viewModel.referenceItems}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){const{state:e}=this.viewModel,t={[P.hidden]:e==="loading",[P.disabled]:e==="disabled"};return o("div",{class:this.classes(_.base,P.widget,P.panel,t)},this._renderItems())}_renderItemTooltip(e){return e?o("calcite-tooltip",{key:`tooltip-${e.layer.uid}`,referenceElement:this._tooltipReferenceMap.get(e.layer.uid)},this.messages.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){var t;return e.incompatible?this._renderItemTooltip(e):(t=e.children)==null?void 0:t.filter(i=>!i.hidden).toArray().map(i=>this._renderItemTooltipNodes(i))}_renderItemTooltips(e){return e==null?void 0:e.toArray().map(t=>this._renderItemTooltipNodes(t))}_renderPanelFlowItems(e){return e?e.flatten(t=>t.children).filter(t=>!t.hidden).toArray().filter(({panel:t})=>(t==null?void 0:t.open)&&!t.disabled&&t.flowEnabled).map(({title:t,panel:i})=>{const s=()=>this._handlePanelFlowItemBack(i);return o("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:t,heading:i.title,headingLevel:this.headingLevel,key:`flow-panel-${i.uid}`,onCalciteFlowItemBack:n=>{n.preventDefault(),s()}},i.render(),o("calcite-button",{appearance:"transparent",onclick:s,slot:"footer-actions",width:"full"},this.messagesCommon.back))}):[]}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusEditingFlowItemNode(e){this._focusEditingFlowItem&&(this._focusEditingFlowItem=!1,requestAnimationFrame(()=>e==null?void 0:e.setFocus()))}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,requestAnimationFrame(()=>e==null?void 0:e.setFocus()))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,requestAnimationFrame(()=>e==null?void 0:e.setFocus()))}_renderItemMessage(e){return e.error?o("div",{class:_.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},o("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},o("div",{slot:"message"},this.messages.layerError))):e.incompatible?o("div",{class:_.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},o("calcite-notice",{afterCreate:t=>this._setTooltipReference(t,e),afterRemoved:()=>this._removeTooltipReference(e),icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},o("div",{slot:"message"},this.messages.layerIncompatible))):null}_renderItem(e,t,i,s,n){const{_activeItem:c,_selectedDragItemLayerUid:h,selectionMode:r,selectedItems:m,messages:g}=this,b=e.title||g.untitledLayer,u=e.visibleAtCurrentScale?b:`${b} (${g.layerInvisibleAtScale})`,f=this._filterActions(e.actionsSections),p=this._countActions(f);return o("calcite-list-item",{afterCreate:y=>this._focusSelectedDragEl(y,e),afterUpdate:y=>this._focusSelectedDragEl(y,e),class:this.classes(_.item,{[_.itemActive]:c===e}),"data-item":e,dragDisabled:!e.sortable||i,dragSelected:e.layer.uid===h,id:e.layer.uid,key:`list-item-${e.layer.uid}`,label:b,metadata:{parentTitles:n,title:b},open:e.open,selected:r!=="none"&&m.includes(e),title:u,value:e.layer.uid,onCalciteListItemDragHandleChange:y=>this._handleCalciteListItemDragHandleChange(y,e),onCalciteListItemSelect:y=>this._handleCalciteListItemSelect(y,e,s),onCalciteListItemToggle:y=>this._handleCalciteListItemToggle(y,e)},o("div",{class:this.classes({[_.itemContent]:!0,[_.itemInvisibleAtScale]:!e.visibleAtCurrentScale}),slot:"content"},b),this._renderItemStatus(e,s),this._renderItemToggle(e,s),this._renderItemTemporaryIcon(e),this._renderChildList(e,t,n),this._renderItemMessage(e),this._renderPanel(e.panel),this._renderPanelAction(e.panel),p>1?this._renderActionsSections(e,f):p===1?this._renderAction({item:e,action:this._getSingleActionButton(f),textEnabled:!1}):null)}_renderItemStatus(e,t){const{visibleElements:i}=this;if(!i.statusIndicators)return null;const{connectionStatus:s,publishing:n,updating:c}=e,h=c&&!t,r=!!s;return o("calcite-icon",{class:this.classes({[_.statusIndicator]:!0,[_.publishing]:n,[_.updating]:h,[_.connectionStatus]:r,[_.connectionStatusConnected]:r&&s==="connected"}),icon:ne({connectionStatus:s,publishing:n}),key:"layer-item-status",scale:"s",slot:"actions-end"})}_renderItemTemporaryIcon(e){return this.visibleElements.temporaryLayerIndicators&&"persistenceEnabled"in e.layer&&!e.layer.persistenceEnabled?o("calcite-icon",{class:_.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"actions-start",title:this.messages.temporary}):null}_renderItemToggle(e,t){const{messages:i,visibilityAppearance:s}=this,{visible:n}=e,c=t==null?void 0:t.visibilityMode;if(c==="inherited")return null;const h=he({visible:n,exclusive:c==="exclusive",visibilityAppearance:s}),r=s==="checkbox";return o("calcite-action",{appearance:"transparent",class:_.visibleToggle,icon:r?h:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:r?"actions-start":"actions-end",text:i.layerVisibility,title:i.layerVisibility},r?null:o("calcite-icon",{class:this.classes({[_.visibleIcon]:c!=="exclusive"&&n}),icon:h,scale:"s"}))}_renderPanel(e){return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:o("div",{class:_.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}_renderPanelAction(e){if(!(e!=null&&e.visible))return null;const{open:t,title:i,disabled:s}=e;return o("calcite-action",{active:t,appearance:"transparent",disabled:s,icon:j(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(e))}_renderActionsSections(e,t){return o("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:this.messagesCommon.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:i=>e.actionsOpen=i.target.open},o("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:this.messagesCommon.options,title:this.messagesCommon.options}),t.toArray().map((i,s)=>this._renderActionSection(e,i,s)))}_renderActionSection(e,t,i){return o("calcite-action-group",{key:`action-section-${i}`},t.toArray().map(s=>this._renderAction({item:e,action:s,textEnabled:!0})))}_renderFallbackIcon(e){const{className:t,icon:i}=e;if(i)return null;const s="image"in e?e.image:void 0,n={[_.itemActionIcon]:!!t,[_.itemActionImage]:!!s};return t&&(n[t]=!0),s||t?o("span",{"aria-hidden":"true",class:this.classes(_.itemActionIcon,n),key:"icon",styles:le(s)}):null}_renderAction(e){const{item:t,action:i,textEnabled:s}=e,{active:n,disabled:c,title:h,type:r,indicator:m}=i;return o("calcite-action",{active:r==="toggle"&&i.value,appearance:"transparent",disabled:c,icon:j(i),indicator:m,key:`action-${i.uid}`,loading:n,onclick:()=>this._triggerAction(t,i),scale:"s",slot:s?void 0:"actions-end",text:h??"",textEnabled:s,title:h??void 0},this._renderFallbackIcon(i))}_setTooltipReference(e,t){this._tooltipReferenceMap.set(t.layer.uid,e)}_removeTooltipReference(e){this._tooltipReferenceMap.delete(e.layer.uid)}_moveLayerFromChildList({toEl:e,fromEl:t,dragEl:i,newIndex:s}){const n=C(i),c=C(e),h=C(t),r=S(t),m=S(e);r&&m&&this.viewModel.moveListItem({targetItem:n,fromParentItem:h,toParentItem:c,newIndex:s,from:r,to:m})}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:i,oldIndex:s}=e;t.insertBefore(i,t.children[s])}_sortLayers(e,t){var i,s,n,c,h,r;if(e)if(e.group===K){const m=S(e),g=m==="base"?(n=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap)==null?void 0:n.baseLayers:m==="reference"?(r=(h=(c=this.view)==null?void 0:c.map)==null?void 0:h.basemap)==null?void 0:r.referenceLayers:null;ae(g,t)}else{const m=C(e);if(!m)return;re(m,t)}}_getSingleActionButton(e){return e.reduce(t=>t).filter(t=>t&&t.type==="button").at(0)}_filterActions(e){return e.map(t=>t.filter(i=>i.visible))}_countActions(e){return e.reduce((t,i)=>t+i.length,0)}_triggerAction(e,t){t&&e&&(t.type==="toggle"&&(t.value=!t.value),this.triggerAction(t,e))}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:i}=this;if(t==="none")return;const s=e.target.selectedItems.map(n=>C(n)).filter(Boolean);i.removeAll(),i.addMany(s)}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_focusSelectedDragEl(e,t){this._selectedDragItemLayerUid===t.layer.uid&&requestAnimationFrame(()=>e==null?void 0:e.setFocus())}_handleCalciteListItemDragHandleChange(e,t){e.stopPropagation();const i=e.target.dragSelected;this._selectedDragItemLayerUid=i?t.layer.uid:null}_handleCalciteListItemSelect(e,t,i){C(e.target)===t&&this.selectionMode==="none"&&(i==null?void 0:i.visibilityMode)!=="inherited"&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&(this._focusPanelFlowItem=!0)}_toggleVisibility(e,t){if(!e)return;(t==null?void 0:t.visibilityMode)==="exclusive"&&e.visible||(e.visible=!e.visible)}_renderEditingInput(){const{messages:e}=this,{basemapTitle:t}=this.viewModel;return o("div",{class:_.editing},o("calcite-label",null,e.basemapTitle,o("calcite-input",{afterCreate:i=>this._editTitleInput=i,label:e.basemapTitle,name:"basemaptitle",pattern:ue,placeholder:e.basemapTitle,required:!0,title:e.basemapTitle,type:"text",value:t??void 0})))}_renderCancelButton(){const{messagesCommon:{cancel:e}}=this;return o("calcite-button",{appearance:"outline",bind:this,label:e,onclick:this._toggleEditingTitle,slot:"footer",title:e,width:"half"},e)}_renderSubmitButton(){const{messagesCommon:e}=this;return o("calcite-button",{label:e.form.submit,slot:"footer",title:e.form.submit,type:"submit",width:"half"},e.form.ok)}_renderEditingForm(){return this.editingTitle?o("form",{bind:this,onsubmit:this._formSubmit},o("calcite-flow-item",{afterCreate:this._focusEditingFlowItemNode,afterUpdate:this._focusEditingFlowItemNode,bind:this,heading:this.visibleElements.heading?this.messages.basemapTitle:void 0,headingLevel:this.headingLevel,onCalciteFlowItemBack:e=>{e.preventDefault(),this._toggleEditingTitle()}},this._renderEditingInput(),this._renderCancelButton(),this._renderSubmitButton())):null}_renderEditTitleButton(){const{editingTitle:e,visibleElements:{editTitleButton:t},messagesCommon:{edit:i}}=this;return t&&!e?o("calcite-action",{bind:this,icon:"pencil",label:i,onclick:this._toggleEditingTitle,slot:"header-actions-end",text:i,title:i}):null}_renderNoLayersInfoMessage(e){return o("div",{slot:"message"},e)}_renderNoLayersInfo(e,t){return o("div",{class:_.itemMessage},o("calcite-notice",{icon:"information",key:t,kind:"info",open:!0,scale:"m",width:"full"},this._renderNoLayersInfoMessage(e)))}_getFilteredItems(e){return e==null?void 0:e.filter(t=>!t.hidden&&(this.visibleElements.errors||!t.error))}_renderItems(){const{collapsed:e,visible:t,visibleElements:{closeButton:i,collapseButton:s,heading:n,flow:c},messages:h,viewModel:r,referenceItems:m,baseItems:g}=this,b=this.visibleElements.referenceLayers?this._getFilteredItems(m):null,u=this.visibleElements.baseLayers?this._getFilteredItems(g):null,f=[o("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:i,closed:!t,collapsed:e,collapsible:s,heading:n?r.basemapTitle??h.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",onCalciteFlowItemClose:()=>this.visible=!1},this._renderEditTitleButton(),this._renderReferenceSection(b),this._renderBaseSection(u,(u==null?void 0:u.length)===1)),this._renderEditingForm(),this._renderPanelFlowItems(u),this._renderPanelFlowItems(b)];return t?[c?o("calcite-flow",{key:"root-flow"},f):f,this._renderItemTooltips(b),this._renderItemTooltips(u)]:null}_renderChildList(e,t,i=[]){var r;const{dragEnabled:s}=this,{children:n}=e,c=oe(e),h=!ce(e.layer)&&!c&&s&&((r=e.layer)==null?void 0:r.type)==="group";return c||h?o("calcite-list",{canPull:m=>this._canMove(m,"pull"),canPut:m=>this._canMove(m,"put"),"data-basemap-layer-type":t,"data-item":e,"data-layer-type":J,dragEnabled:!!s&&e.childrenSortable&&de(e),group:e.layer.uid},n==null?void 0:n.filter(m=>!m.hidden).toArray().map(m=>this._renderItem(m,t,!1,e,[...i,e.title]))):null}_renderList(e,t,i){const{messages:s,dragEnabled:n,selectionMode:c,filterPlaceholder:h,baseFilterText:r,referenceFilterText:m,_baseFilterEnabled:g,_referenceFilterEnabled:b}=this,u=t==="reference"?s.noReferenceLayers:s.noBaseLayers,f=t==="reference"?b:g;return o("calcite-block",{class:_.section,collapsible:!0,heading:t==="reference"?s.referenceHeading:s.baseHeading,headingLevel:me(this.headingLevel),key:`block-${t}`,open:!0},(e==null?void 0:e.length)===0?this._renderNoLayersInfo(u,t):null,o("calcite-list",{afterCreate:p=>{p.addEventListener("focusin",this._setActiveItem),p.addEventListener("focusout",this._clearActiveItem)},afterRemoved:p=>{p.removeEventListener("focusin",this._setActiveItem),p.removeEventListener("focusout",this._clearActiveItem)},canPull:p=>this._canMove(p,"pull"),canPut:p=>this._canMove(p,"put"),"data-basemap-layer-type":t,"data-layer-type":J,dragEnabled:n,filterEnabled:f,filterPlaceholder:h,filterText:f?t==="reference"?m:r:"",group:K,key:`list-${t}`,label:s.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:c,onCalciteListChange:p=>this._handleCalciteListChange(p),onCalciteListDragEnd:p=>this._handleCalciteListDragEnd(p.detail),onCalciteListFilter:p=>{var y;return this[t==="reference"?"referenceFilterText":"baseFilterText"]=((y=p.target)==null?void 0:y.filterText)??""},onCalciteListOrderChange:p=>this._onCalciteListOrderChange(p.detail)},e==null?void 0:e.toArray().map(p=>this._renderItem(p,t,i)),e!=null&&e.length&&f?o("div",{class:_.filterNoResults,slot:"filter-no-results"},o("calcite-notice",{kind:"info",open:!0,scale:"m",width:"full"},this._renderNoLayersInfoMessage(u))):null))}_renderBaseSection(e,t){return this.visibleElements.baseLayers?this._renderList(e,"base",t):null}_renderReferenceSection(e){return this.visibleElements.referenceLayers?this._renderList(e,"reference",!1):null}_toggleEditingTitle(){const{editingTitle:e}=this,t=!e;this.editingTitle=t,t?this._focusEditingFlowItem=!0:this._focusRootFlowItem=!0}_formSubmit(e){var i;e.preventDefault();const t=(i=this._editTitleInput)==null?void 0:i.value;t!=null&&t.trim()&&(this.basemapTitle=t),this._toggleEditingTitle()}};function S(e){return e==null?void 0:e.getAttribute("data-basemap-layer-type")}l([a()],d.prototype,"_activeItem",void 0),l([a()],d.prototype,"_tooltipReferenceMap",void 0),l([a()],d.prototype,"_focusRootFlowItem",void 0),l([a()],d.prototype,"_focusPanelFlowItem",void 0),l([a()],d.prototype,"_focusEditingFlowItem",void 0),l([a()],d.prototype,"_baseFilterEnabled",null),l([a()],d.prototype,"_referenceFilterEnabled",null),l([a()],d.prototype,"basemapTitle",null),l([a()],d.prototype,"collapsed",void 0),l([a()],d.prototype,"dragEnabled",void 0),l([a()],d.prototype,"editingTitle",void 0),l([a()],d.prototype,"filterPlaceholder",void 0),l([a()],d.prototype,"baseFilterText",void 0),l([a()],d.prototype,"referenceFilterText",void 0),l([a()],d.prototype,"listItemCanGiveFunction",void 0),l([a()],d.prototype,"listItemCanReceiveFunction",void 0),l([a()],d.prototype,"baseListItemCreatedFunction",null),l([a()],d.prototype,"editingEnabled",null),l([a()],d.prototype,"headingLevel",void 0),l([a()],d.prototype,"iconClass",void 0),l([a()],d.prototype,"label",null),l([a(),z("esri/widgets/BasemapLayerList/t9n/BasemapLayerList")],d.prototype,"messages",void 0),l([a(),z("esri/t9n/common")],d.prototype,"messagesCommon",void 0),l([a()],d.prototype,"minFilterItems",void 0),l([a()],d.prototype,"multipleSelectionEnabled",null),l([a()],d.prototype,"referenceListItemCreatedFunction",null),l([a({readOnly:!0})],d.prototype,"baseItems",null),l([a({readOnly:!0})],d.prototype,"referenceItems",null),l([a()],d.prototype,"selectedItems",void 0),l([a()],d.prototype,"selectionMode",void 0),l([a()],d.prototype,"view",null),l([ee("trigger-action"),a({type:W})],d.prototype,"viewModel",void 0),l([a()],d.prototype,"visibilityAppearance",void 0),l([a({type:x,nonNullable:!0})],d.prototype,"visibleElements",void 0),d=l([N("esri.widgets.BasemapLayerList")],d);const be=d;export{be as default};
