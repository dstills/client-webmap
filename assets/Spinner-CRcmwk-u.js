import{E as o,F as n,J as c,j1 as u,bt as b,j3 as m,aO as y}from"./index-BS4ejk0L.js";import{l as M}from"./AnchorElementViewModel-Ce6oiPjx.js";const _="esri.widgets.CompassViewModel";let l=class extends M{constructor(e){super(e),this.visible=!1}};o([n()],l.prototype,"visible",void 0),l=o([c(_)],l);const v=l,r="esri-spinner",h={base:r,spinnerStart:`${r}--start`,spinnerFinish:`${r}--finish`};let s=class extends u{constructor(i,e){super(i,e),this._animationDelay=500,this._animationPromise=null,this.viewModel=new v}initialize(){this.addHandles(b(()=>this.visible,i=>this._visibleChange(i)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(i){this.viewModel.location=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}get visible(){return this.viewModel.visible}set visible(i){this.viewModel.visible=i}show(i){const{location:e,promise:t}=i??{};e&&(this.viewModel.location=e),this.visible=!0;const a=()=>this.hide();t&&t.catch(()=>{}).then(a)}hide(){this.visible=!1}render(){const{visible:i}=this,{screenLocation:e}=this.viewModel,t=!!e,a=i&&t,d=!i&&t,p={[h.spinnerStart]:a,[h.spinnerFinish]:d},w=this._getPositionStyles();return m("div",{class:this.classes(h.base,p),styles:w})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const e=y(this._animationDelay);this._animationPromise=e,e.catch(()=>{}).then(()=>{this._animationPromise===e&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:i,view:e}=this.viewModel;if(e==null||i==null)return{};const{padding:t}=e;return{left:i.x-t.left+"px",top:i.y-t.top+"px"}}};o([n()],s.prototype,"location",null),o([n()],s.prototype,"view",null),o([n({type:v})],s.prototype,"viewModel",void 0),o([n()],s.prototype,"visible",null),s=o([c("esri.widgets.Spinner")],s);const P=s;export{v as c,P as h};
