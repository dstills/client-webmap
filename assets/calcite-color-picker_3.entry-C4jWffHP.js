import{bN as Q,bU as G,bO as d,bQ as Z,bV as re}from"./index-BS4ejk0L.js";import{l as $,g as He,d as Le,i as Re}from"./dom-bef18e4a-C5uoTC-E.js";import{C as se,n as A,a as k,b as U,o as V,c as N,p as ie,d as Ee,e as ae,t as Ne,f as le,g as Ke,j as qe,i as L,r as $e,k as Ue}from"./utils-54cd3bb6-C-gCtMN8.js";import{c as je,d as Ve,u as Be,I as _e}from"./interactive-583e13d7-DEBopD4A.js";import{i as We}from"./key-3f1e3da4-DU8kuSDQ.js";import{c as be,s as Ce,a as ve}from"./loadable-6056dcbc-HyQg79t4.js";import{c as Xe,d as Ge}from"./locale-b835bf72-D8tDsiQl.js";import{r as ce,c as Ye,a as Je}from"./math-a5520ff4-BEjMmqe5.js";import{u as Qe,s as Ze,c as et,d as tt}from"./t9n-91f18f76-DFAjXj-4.js";import{t as nt}from"./throttle-1cd6d03d-Dflztnnl.js";import"./debounce-fea9fa7b-C4ODLmyJ.js";import"./guid-617f6e1b-DQtJl1SZ.js";import"./browser-1baf23f7-zzj4YD6P.js";import"./observers-ff65e337--1jEkyko.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.7.1
 */function ye(e,t,n){return n={path:t,exports:{},require:function(o,r){return ot()}},e(n,n.exports),n.exports}function ot(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var R={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},rt=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},E=ye(function(e){var t=Array.prototype.concat,n=Array.prototype.slice,o=e.exports=function(s){for(var a=[],i=0,l=s.length;i<l;i++){var c=s[i];rt(c)?a=t.call(a,n.call(c)):a.push(c)}return a};o.wrap=function(r){return function(){return r(o(arguments))}}}),T=ye(function(e){var t=Object.hasOwnProperty,n=Object.create(null);for(var o in R)t.call(R,o)&&(n[R[o]]=o);var r=e.exports={to:{},get:{}};r.get=function(i){var l=i.substring(0,3).toLowerCase(),c,u;switch(l){case"hsl":c=r.get.hsl(i),u="hsl";break;case"hwb":c=r.get.hwb(i),u="hwb";break;default:c=r.get.rgb(i),u="rgb";break}return c?{model:u,value:c}:null},r.get.rgb=function(i){if(!i)return null;var l=/^#([a-f0-9]{3,4})$/i,c=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,u=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,g=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,v=/^(\w+)$/,m=[0,0,0,1],p,b,x;if(p=i.match(c)){for(x=p[2],p=p[1],b=0;b<3;b++){var D=b*2;m[b]=parseInt(p.slice(D,D+2),16)}x&&(m[3]=parseInt(x,16)/255)}else if(p=i.match(l)){for(p=p[1],x=p[3],b=0;b<3;b++)m[b]=parseInt(p[b]+p[b],16);x&&(m[3]=parseInt(x+x,16)/255)}else if(p=i.match(u)){for(b=0;b<3;b++)m[b]=parseInt(p[b+1],0);p[4]&&(p[5]?m[3]=parseFloat(p[4])*.01:m[3]=parseFloat(p[4]))}else if(p=i.match(g)){for(b=0;b<3;b++)m[b]=Math.round(parseFloat(p[b+1])*2.55);p[4]&&(p[5]?m[3]=parseFloat(p[4])*.01:m[3]=parseFloat(p[4]))}else return(p=i.match(v))?p[1]==="transparent"?[0,0,0,0]:t.call(R,p[1])?(m=R[p[1]],m[3]=1,m):null:null;for(b=0;b<3;b++)m[b]=s(m[b],0,255);return m[3]=s(m[3],0,1),m},r.get.hsl=function(i){if(!i)return null;var l=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,c=i.match(l);if(c){var u=parseFloat(c[4]),g=(parseFloat(c[1])%360+360)%360,v=s(parseFloat(c[2]),0,100),m=s(parseFloat(c[3]),0,100),p=s(isNaN(u)?1:u,0,1);return[g,v,m,p]}return null},r.get.hwb=function(i){if(!i)return null;var l=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,c=i.match(l);if(c){var u=parseFloat(c[4]),g=(parseFloat(c[1])%360+360)%360,v=s(parseFloat(c[2]),0,100),m=s(parseFloat(c[3]),0,100),p=s(isNaN(u)?1:u,0,1);return[g,v,m,p]}return null},r.to.hex=function(){var i=E(arguments);return"#"+a(i[0])+a(i[1])+a(i[2])+(i[3]<1?a(Math.round(i[3]*255)):"")},r.to.rgb=function(){var i=E(arguments);return i.length<4||i[3]===1?"rgb("+Math.round(i[0])+", "+Math.round(i[1])+", "+Math.round(i[2])+")":"rgba("+Math.round(i[0])+", "+Math.round(i[1])+", "+Math.round(i[2])+", "+i[3]+")"},r.to.rgb.percent=function(){var i=E(arguments),l=Math.round(i[0]/255*100),c=Math.round(i[1]/255*100),u=Math.round(i[2]/255*100);return i.length<4||i[3]===1?"rgb("+l+"%, "+c+"%, "+u+"%)":"rgba("+l+"%, "+c+"%, "+u+"%, "+i[3]+")"},r.to.hsl=function(){var i=E(arguments);return i.length<4||i[3]===1?"hsl("+i[0]+", "+i[1]+"%, "+i[2]+"%)":"hsla("+i[0]+", "+i[1]+"%, "+i[2]+"%, "+i[3]+")"},r.to.hwb=function(){var i=E(arguments),l="";return i.length>=4&&i[3]!==1&&(l=", "+i[3]),"hwb("+i[0]+", "+i[1]+"%, "+i[2]+"%"+l+")"},r.to.keyword=function(i){return n[i.slice(0,3)]};function s(i,l,c){return Math.min(Math.max(l,i),c)}function a(i){var l=Math.round(i).toString(16).toUpperCase();return l.length<2?"0"+l:l}}),K={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const we={};for(const e of Object.keys(K))we[K[e]]=e;const h={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var P=h;for(const e of Object.keys(h)){if(!("channels"in h[e]))throw new Error("missing channels property: "+e);if(!("labels"in h[e]))throw new Error("missing channel labels property: "+e);if(h[e].labels.length!==h[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=h[e];delete h[e].channels,delete h[e].labels,Object.defineProperty(h[e],"channels",{value:t}),Object.defineProperty(h[e],"labels",{value:n})}h.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,o=e[2]/255,r=Math.min(t,n,o),s=Math.max(t,n,o),a=s-r;let i,l;s===r?i=0:t===s?i=(n-o)/a:n===s?i=2+(o-t)/a:o===s&&(i=4+(t-n)/a),i=Math.min(i*60,360),i<0&&(i+=360);const c=(r+s)/2;return s===r?l=0:c<=.5?l=a/(s+r):l=a/(2-s-r),[i,l*100,c*100]};h.rgb.hsv=function(e){let t,n,o,r,s;const a=e[0]/255,i=e[1]/255,l=e[2]/255,c=Math.max(a,i,l),u=c-Math.min(a,i,l),g=function(v){return(c-v)/6/u+1/2};return u===0?(r=0,s=0):(s=u/c,t=g(a),n=g(i),o=g(l),a===c?r=o-n:i===c?r=1/3+t-o:l===c&&(r=2/3+n-t),r<0?r+=1:r>1&&(r-=1)),[r*360,s*100,c*100]};h.rgb.hwb=function(e){const t=e[0],n=e[1];let o=e[2];const r=h.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(n,o));return o=1-1/255*Math.max(t,Math.max(n,o)),[r,s*100,o*100]};h.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,o=e[2]/255,r=Math.min(1-t,1-n,1-o),s=(1-t-r)/(1-r)||0,a=(1-n-r)/(1-r)||0,i=(1-o-r)/(1-r)||0;return[s*100,a*100,i*100,r*100]};function st(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}h.rgb.keyword=function(e){const t=we[e];if(t)return t;let n=1/0,o;for(const r of Object.keys(K)){const s=K[r],a=st(e,s);a<n&&(n=a,o=r)}return o};h.keyword.rgb=function(e){return K[e]};h.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,o=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;const r=t*.4124+n*.3576+o*.1805,s=t*.2126+n*.7152+o*.0722,a=t*.0193+n*.1192+o*.9505;return[r*100,s*100,a*100]};h.rgb.lab=function(e){const t=h.rgb.xyz(e);let n=t[0],o=t[1],r=t[2];n/=95.047,o/=100,r/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const s=116*o-16,a=500*(n-o),i=200*(o-r);return[s,a,i]};h.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,o=e[2]/100;let r,s,a;if(n===0)return a=o*255,[a,a,a];o<.5?r=o*(1+n):r=o+n-o*n;const i=2*o-r,l=[0,0,0];for(let c=0;c<3;c++)s=t+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?a=i+(r-i)*6*s:2*s<1?a=r:3*s<2?a=i+(r-i)*(2/3-s)*6:a=i,l[c]=a*255;return l};h.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,o=e[2]/100,r=n;const s=Math.max(o,.01);o*=2,n*=o<=1?o:2-o,r*=s<=1?s:2-s;const a=(o+n)/2,i=o===0?2*r/(s+r):2*n/(o+n);return[t,i*100,a*100]};h.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let o=e[2]/100;const r=Math.floor(t)%6,s=t-Math.floor(t),a=255*o*(1-n),i=255*o*(1-n*s),l=255*o*(1-n*(1-s));switch(o*=255,r){case 0:return[o,l,a];case 1:return[i,o,a];case 2:return[a,o,l];case 3:return[a,i,o];case 4:return[l,a,o];case 5:return[o,a,i]}};h.hsv.hsl=function(e){const t=e[0],n=e[1]/100,o=e[2]/100,r=Math.max(o,.01);let s,a;a=(2-n)*o;const i=(2-n)*r;return s=n*r,s/=i<=1?i:2-i,s=s||0,a/=2,[t,s*100,a*100]};h.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,o=e[2]/100;const r=n+o;let s;r>1&&(n/=r,o/=r);const a=Math.floor(6*t),i=1-o;s=6*t-a,a&1&&(s=1-s);const l=n+s*(i-n);let c,u,g;switch(a){default:case 6:case 0:c=i,u=l,g=n;break;case 1:c=l,u=i,g=n;break;case 2:c=n,u=i,g=l;break;case 3:c=n,u=l,g=i;break;case 4:c=l,u=n,g=i;break;case 5:c=i,u=n,g=l;break}return[c*255,u*255,g*255]};h.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,o=e[2]/100,r=e[3]/100,s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,n*(1-r)+r),i=1-Math.min(1,o*(1-r)+r);return[s*255,a*255,i*255]};h.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,o=e[2]/100;let r,s,a;return r=t*3.2406+n*-1.5372+o*-.4986,s=t*-.9689+n*1.8758+o*.0415,a=t*.0557+n*-.204+o*1.057,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,r=Math.min(Math.max(0,r),1),s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),[r*255,s*255,a*255]};h.xyz.lab=function(e){let t=e[0],n=e[1],o=e[2];t/=95.047,n/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;const r=116*n-16,s=500*(t-n),a=200*(n-o);return[r,s,a]};h.lab.xyz=function(e){const t=e[0],n=e[1],o=e[2];let r,s,a;s=(t+16)/116,r=n/500+s,a=s-o/200;const i=s**3,l=r**3,c=a**3;return s=i>.008856?i:(s-16/116)/7.787,r=l>.008856?l:(r-16/116)/7.787,a=c>.008856?c:(a-16/116)/7.787,r*=95.047,s*=100,a*=108.883,[r,s,a]};h.lab.lch=function(e){const t=e[0],n=e[1],o=e[2];let r;r=Math.atan2(o,n)*360/2/Math.PI,r<0&&(r+=360);const a=Math.sqrt(n*n+o*o);return[t,a,r]};h.lch.lab=function(e){const t=e[0],n=e[1],r=e[2]/360*2*Math.PI,s=n*Math.cos(r),a=n*Math.sin(r);return[t,s,a]};h.rgb.ansi16=function(e,t=null){const[n,o,r]=e;let s=t===null?h.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let a=30+(Math.round(r/255)<<2|Math.round(o/255)<<1|Math.round(n/255));return s===2&&(a+=60),a};h.hsv.ansi16=function(e){return h.rgb.ansi16(h.hsv.rgb(e),e[2])};h.rgb.ansi256=function(e){const t=e[0],n=e[1],o=e[2];return t===n&&n===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(o/255*5)};h.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(~~(e>50)+1)*.5,o=(t&1)*n*255,r=(t>>1&1)*n*255,s=(t>>2&1)*n*255;return[o,r,s]};h.ansi256.rgb=function(e){if(e>=232){const s=(e-232)*10+8;return[s,s,s]}e-=16;let t;const n=Math.floor(e/36)/5*255,o=Math.floor((t=e%36)/6)/5*255,r=t%6/5*255;return[n,o,r]};h.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n};h.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=n.split("").map(i=>i+i).join(""));const o=parseInt(n,16),r=o>>16&255,s=o>>8&255,a=o&255;return[r,s,a]};h.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,o=e[2]/255,r=Math.max(Math.max(t,n),o),s=Math.min(Math.min(t,n),o),a=r-s;let i,l;return a<1?i=s/(1-a):i=0,a<=0?l=0:r===t?l=(n-o)/a%6:r===n?l=2+(o-t)/a:l=4+(t-n)/a,l/=6,l%=1,[l*360,a*100,i*100]};h.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,o=n<.5?2*t*n:2*t*(1-n);let r=0;return o<1&&(r=(n-.5*o)/(1-o)),[e[0],o*100,r*100]};h.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,o=t*n;let r=0;return o<1&&(r=(n-o)/(1-o)),[e[0],o*100,r*100]};h.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,o=e[2]/100;if(n===0)return[o*255,o*255,o*255];const r=[0,0,0],s=t%1*6,a=s%1,i=1-a;let l=0;switch(Math.floor(s)){case 0:r[0]=1,r[1]=a,r[2]=0;break;case 1:r[0]=i,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=a;break;case 3:r[0]=0,r[1]=i,r[2]=1;break;case 4:r[0]=a,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=i}return l=(1-n)*o,[(n*r[0]+l)*255,(n*r[1]+l)*255,(n*r[2]+l)*255]};h.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,o=t+n*(1-t);let r=0;return o>0&&(r=t/o),[e[0],r*100,o*100]};h.hcg.hsl=function(e){const t=e[1]/100,o=e[2]/100*(1-t)+.5*t;let r=0;return o>0&&o<.5?r=t/(2*o):o>=.5&&o<1&&(r=t/(2*(1-o))),[e[0],r*100,o*100]};h.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,o=t+n*(1-t);return[e[0],(o-t)*100,(1-o)*100]};h.hwb.hcg=function(e){const t=e[1]/100,o=1-e[2]/100,r=o-t;let s=0;return r<1&&(s=(o-r)/(1-r)),[e[0],r*100,s*100]};h.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};h.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};h.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};h.gray.hsl=function(e){return[0,0,e[0]]};h.gray.hsv=h.gray.hsl;h.gray.hwb=function(e){return[0,100,e[0]]};h.gray.cmyk=function(e){return[0,0,0,e[0]]};h.gray.lab=function(e){return[e[0],0,0]};h.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o};h.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};function it(){const e={},t=Object.keys(P);for(let n=t.length,o=0;o<n;o++)e[t[o]]={distance:-1,parent:null};return e}function at(e){const t=it(),n=[e];for(t[e].distance=0;n.length;){const o=n.pop(),r=Object.keys(P[o]);for(let s=r.length,a=0;a<s;a++){const i=r[a],l=t[i];l.distance===-1&&(l.distance=t[o].distance+1,l.parent=o,n.unshift(i))}}return t}function lt(e,t){return function(n){return t(e(n))}}function ct(e,t){const n=[t[e].parent,e];let o=P[t[e].parent][e],r=t[e].parent;for(;t[r].parent;)n.unshift(t[r].parent),o=lt(P[t[r].parent][r],o),r=t[r].parent;return o.conversion=n,o}var ht=function(e){const t=at(e),n={},o=Object.keys(t);for(let r=o.length,s=0;s<r;s++){const a=o[s];t[a].parent!==null&&(n[a]=ct(a,t))}return n};const H={},dt=Object.keys(P);function ut(e){const t=function(...n){const o=n[0];return o==null?o:(o.length>1&&(n=o),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function pt(e){const t=function(...n){const o=n[0];if(o==null)return o;o.length>1&&(n=o);const r=e(n);if(typeof r=="object")for(let s=r.length,a=0;a<s;a++)r[a]=Math.round(r[a]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}dt.forEach(e=>{H[e]={},Object.defineProperty(H[e],"channels",{value:P[e].channels}),Object.defineProperty(H[e],"labels",{value:P[e].labels});const t=ht(e);Object.keys(t).forEach(o=>{const r=t[o];H[e][o]=pt(r),H[e][o].raw=ut(r)})});var S=H;const xe=["keyword","gray","hex"],Y={};for(const e of Object.keys(S))Y[[...S[e].labels].sort().join("")]=e;const B={};function w(e,t){if(!(this instanceof w))return new w(e,t);if(t&&t in xe&&(t=null),t&&!(t in S))throw new Error("Unknown model: "+t);let n,o;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof w)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const r=T.get(e);if(r===null)throw new Error("Unable to parse color from string: "+e);this.model=r.model,o=S[this.model].channels,this.color=r.value.slice(0,o),this.valpha=typeof r.value[o]=="number"?r.value[o]:1}else if(e.length>0){this.model=t||"rgb",o=S[this.model].channels;const r=Array.prototype.slice.call(e,0,o);this.color=J(r,o),this.valpha=typeof e[o]=="number"?e[o]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(e);"alpha"in e&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const s=r.sort().join("");if(!(s in Y))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Y[s];const{labels:a}=S[this.model],i=[];for(n=0;n<a.length;n++)i.push(e[a[n]]);this.color=J(i)}if(B[this.model])for(o=S[this.model].channels,n=0;n<o;n++){const r=B[this.model][n];r&&(this.color[n]=r(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}w.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in T.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return T.to[t.model](n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return T.to.rgb.percent(n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=S[this.model],{labels:n}=S[this.model];for(let o=0;o<t;o++)e[n[o]]=this.color[o];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new w([...this.color.map(gt(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new w([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:C("rgb",0,y(255)),green:C("rgb",1,y(255)),blue:C("rgb",2,y(255)),hue:C(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:C("hsl",1,y(100)),lightness:C("hsl",2,y(100)),saturationv:C("hsv",1,y(100)),value:C("hsv",2,y(100)),chroma:C("hcg",1,y(100)),gray:C("hcg",2,y(100)),white:C("hwb",1,y(100)),wblack:C("hwb",2,y(100)),cyan:C("cmyk",0,y(100)),magenta:C("cmyk",1,y(100)),yellow:C("cmyk",2,y(100)),black:C("cmyk",3,y(100)),x:C("xyz",0,y(95.047)),y:C("xyz",1,y(100)),z:C("xyz",2,y(108.833)),l:C("lab",0,y(100)),a:C("lab",1),b:C("lab",2),keyword(e){return e!==void 0?new w(e):S[this.model].keyword(this.color)},hex(e){return e!==void 0?new w(e):T.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new w(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),T.to.hex(t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,o]of e.entries()){const r=o/255;t[n]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return w.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),o=this.rgb(),r=t===void 0?.5:t,s=2*r-1,a=n.alpha()-o.alpha(),i=((s*a===-1?s:(s+a)/(1+s*a))+1)/2,l=1-i;return w.rgb(i*n.red()+l*o.red(),i*n.green()+l*o.green(),i*n.blue()+l*o.blue(),n.alpha()*r+o.alpha()*(1-r))}};for(const e of Object.keys(S)){if(xe.includes(e))continue;const{channels:t}=S[e];w.prototype[e]=function(...n){return this.model===e?new w(this):n.length>0?new w(n,e):new w([...mt(S[this.model][e].raw(this.color)),this.valpha],e)},w[e]=function(...n){let o=n[0];return typeof o=="number"&&(o=J(n,t)),new w(o,e)}}function ft(e,t){return Number(e.toFixed(t))}function gt(e){return function(t){return ft(t,e)}}function C(e,t,n){e=Array.isArray(e)?e:[e];for(const o of e)(B[o]||(B[o]=[]))[t]=n;return e=e[0],function(o){let r;return o!==void 0?(n&&(o=n(o)),r=this[e](),r.color[t]=o,r):(r=this[e]().color[t],n&&(r=n(r)),r)}}function y(e){return function(t){return Math.max(0,Math.min(e,t))}}function mt(e){return Array.isArray(e)?e:[e]}function J(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}var F=w;const f={channel:"channel",channels:"channels",colorField:"color-field",colorFieldScope:"scope--color-field",colorMode:"color-mode",colorModeContainer:"color-mode-container",container:"container",control:"control",controlAndScope:"control-and-scope",controlSection:"control-section",deleteColor:"delete-color",header:"header",hexAndChannelsGroup:"hex-and-channels-group",hexOptions:"color-hex-options",hueScope:"scope--hue",hueSlider:"hue-slider",opacityScope:"scope--opacity",opacitySlider:"opacity-slider",preview:"preview",previewAndSliders:"preview-and-sliders",saveColor:"save-color",savedColor:"saved-color",savedColors:"saved-colors",savedColorsButtons:"saved-colors-buttons",savedColorsSection:"saved-colors-section",scope:"scope",section:"section",slider:"slider",sliders:"sliders",splitSection:"section--split"},M=F("#007AC2"),W="calcite-color-",he={r:255,g:255,b:255},I={h:360,s:100,v:100},de=I.h-1,z={min:0,max:100},ue={s:{slider:{height:12,width:104},colorField:{height:80,width:160},thumb:{radius:10}},m:{slider:{height:12,width:204},colorField:{height:150,width:272},thumb:{radius:10}},l:{slider:{height:12,width:384},colorField:{height:200,width:464},thumb:{radius:10}}},pe=1,bt=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){--calcite-color-picker-spacing:8px}:host([scale=s]) .container{inline-size:160px}:host([scale=s]) .saved-colors{gap:0.25rem;grid-template-columns:repeat(auto-fill, 20px)}:host([scale=m]){--calcite-color-picker-spacing:12px}:host([scale=m]) .container{inline-size:272px}:host([scale=l]){--calcite-color-picker-spacing:16px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) .container{inline-size:464px}:host([scale=l]) .section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}:host([scale=l]) .saved-colors{grid-template-columns:repeat(auto-fill, 32px)}:host([scale=l]) .control-section{flex-wrap:nowrap;align-items:baseline;flex-wrap:wrap}:host([scale=l]) .color-hex-options{display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around}:host([scale=l]) .color-mode-container{flex-shrink:3}.container{background-color:var(--calcite-color-foreground-1);display:inline-block;border:1px solid var(--calcite-color-border-1)}.control-and-scope{position:relative;display:flex;cursor:pointer;touch-action:none}.scope{pointer-events:none;position:absolute;z-index:var(--calcite-z-index);block-size:1px;inline-size:1px;border-radius:9999px;background-color:transparent;font-size:var(--calcite-font-size--1);outline-color:transparent}.scope:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand-hover, var(--calcite-color-brand)));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          );outline-offset:11px}.hex-and-channels-group{inline-size:100%}.hex-and-channels-group,.control-section{display:flex;flex-direction:row;flex-wrap:wrap}.section{padding-block:0 var(--calcite-color-picker-spacing);padding-inline:var(--calcite-color-picker-spacing)}.section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}.sliders{display:flex;flex-direction:column;justify-content:space-between;margin-inline-start:var(--calcite-color-picker-spacing)}.preview-and-sliders{display:flex;align-items:center;padding:var(--calcite-color-picker-spacing)}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;color:var(--calcite-color-text-1)}.color-mode-container{padding-block-start:var(--calcite-color-picker-spacing)}.channels{display:flex;row-gap:0.125rem}.channel[data-channel-index="3"]{inline-size:159px}:host([scale=s]) .channels{flex-wrap:wrap}:host([scale=s]) .channel{flex-basis:30%;flex-grow:1}:host([scale=s]) .channel[data-channel-index="3"]{inline-size:unset;margin-inline-start:unset}:host([scale=l]) .channel[data-channel-index="3"]{inline-size:131px}.saved-colors{display:grid;gap:0.5rem;padding-block-start:var(--calcite-color-picker-spacing);grid-template-columns:repeat(auto-fill, 24px)}.saved-colors-buttons{display:flex}.saved-color{outline-offset:0;outline-color:transparent;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.saved-color:hover{transition:outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;outline:2px solid var(--calcite-color-border-2);outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}`,Ct=16,vt=class{constructor(e){Q(this,e),this.calciteColorPickerChange=G(this,"calciteColorPickerChange",6),this.calciteColorPickerInput=G(this,"calciteColorPickerInput",6),this.internalColorUpdateContext=null,this.mode=se.HEX,this.shiftKeyChannelAdjustment=0,this.handleTabActivate=t=>{this.channelMode=t.currentTarget.getAttribute("data-color-mode"),this.updateChannelsFromColor(this.color)},this.handleColorFieldScopeKeyDown=t=>{const{key:n}=t,o={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};o[n]&&(t.preventDefault(),this.scopeOrientation=n==="ArrowDown"||n==="ArrowUp"?"vertical":"horizontal",this.captureColorFieldColor(this.colorFieldScopeLeft+o[n].x||0,this.colorFieldScopeTop+o[n].y||0,!1))},this.handleHueScopeKeyDown=t=>{const n=t.shiftKey?10:1,{key:o}=t,r={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};if(r[o]){t.preventDefault();const s=r[o]*n,a=this.baseColorFieldColor.hue(),i=this.baseColorFieldColor.hue(a+s);this.internalColorSet(i,!1)}},this.handleHexInputChange=t=>{t.stopPropagation();const{isClearable:n,color:o}=this,s=t.target.value;if(n&&!s){this.internalColorSet(null);return}const a=o&&A(k(o,U(this.mode)));s!==a&&this.internalColorSet(F(s))},this.handleSavedColorSelect=t=>{const n=t.currentTarget;this.internalColorSet(F(n.color))},this.handleChannelInput=t=>{const n=t.currentTarget,o=Number(n.getAttribute("data-channel-index")),s=o===3?z.max:this.channelMode==="rgb"?he[Object.keys(he)[o]]:I[Object.keys(I)[o]];let a;if(this.isClearable&&!n.value)a="";else{const l=Number(n.value)+this.shiftKeyChannelAdjustment;a=Ye(l,0,s).toString()}n.value=a,a!==""&&this.shiftKeyChannelAdjustment!==0&&this.handleChannelChange(t)},this.handleChannelChange=t=>{const n=t.currentTarget,o=Number(n.getAttribute("data-channel-index")),r=[...this.channels];if(this.isClearable&&!n.value){this.channels=[null,null,null,null],this.internalColorSet(null);return}const a=o===3,i=Number(n.value);r[o]=a?V(i):i,this.updateColorFromChannels(r)},this.handleSavedColorKeyDown=t=>{We(t.key)&&(t.preventDefault(),this.handleSavedColorSelect(t))},this.handleColorFieldPointerDown=t=>{if(!$(t))return;const{offsetX:n,offsetY:o}=t;window.addEventListener("pointermove",this.globalPointerMoveHandler),window.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:this.colorFieldRenderingContext,bounds:this.colorFieldRenderingContext.canvas.getBoundingClientRect()},this.captureColorFieldColor(n,o),this.colorFieldScopeNode.focus()},this.handleHueSliderPointerDown=t=>{if(!$(t))return;const{offsetX:n}=t;window.addEventListener("pointermove",this.globalPointerMoveHandler),window.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:this.hueSliderRenderingContext,bounds:this.hueSliderRenderingContext.canvas.getBoundingClientRect()},this.captureHueSliderColor(n),this.hueScopeNode.focus()},this.handleOpacitySliderPointerDown=t=>{if(!$(t))return;const{offsetX:n}=t;window.addEventListener("pointermove",this.globalPointerMoveHandler),window.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:this.opacitySliderRenderingContext,bounds:this.opacitySliderRenderingContext.canvas.getBoundingClientRect()},this.captureOpacitySliderValue(n),this.opacityScopeNode.focus()},this.globalPointerUpHandler=t=>{if(!$(t))return;const n=this.activeCanvasInfo;this.activeCanvasInfo=null,this.drawColorControls(),n&&this.calciteColorPickerChange.emit()},this.globalPointerMoveHandler=t=>{const{activeCanvasInfo:n,el:o}=this;if(!o.isConnected||!n)return;const{context:r,bounds:s}=n;let a,i;const{clientX:l,clientY:c}=t;r.canvas.matches(":hover")?(a=l-s.x,i=c-s.y):(l<s.x+s.width&&l>s.x?a=l-s.x:l<s.x?a=0:a=s.width,c<s.y+s.height&&c>s.y?i=c-s.y:c<s.y?i=0:i=s.height),r===this.colorFieldRenderingContext?this.captureColorFieldColor(a,i,!1):r===this.hueSliderRenderingContext?this.captureHueSliderColor(a):r===this.opacitySliderRenderingContext&&this.captureOpacitySliderValue(a)},this.storeColorFieldScope=t=>{this.colorFieldScopeNode=t},this.storeHueScope=t=>{this.hueScopeNode=t},this.renderChannelsTabTitle=t=>{const{channelMode:n,messages:o}=this,r=t===n,s=t==="rgb"?o.rgb:o.hsv;return d("calcite-tab-title",{class:f.colorMode,"data-color-mode":t,key:t,onCalciteTabsActivate:this.handleTabActivate,selected:r},s)},this.renderChannelsTab=t=>{const{isClearable:n,channelMode:o,channels:r,messages:s,alphaChannel:a}=this,i=t===o,c=t==="rgb"?[s.red,s.green,s.blue]:[s.hue,s.saturation,s.value],u=He(this.el),g=a?r:r.slice(0,3);return d("calcite-tab",{class:f.control,key:t,selected:i},d("div",{class:f.channels,dir:"ltr"},g.map((v,m)=>{const p=m===3;return p&&(v=n&&!v?v:N(v)),this.renderChannel(v,m,c[m],u,p?"%":"")})))},this.renderChannel=(t,n,o,r,s)=>d("calcite-input-number",{class:f.channel,"data-channel-index":n,dir:r,key:n,label:o,lang:this.effectiveLocale,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputNumberChange:this.handleChannelChange,onCalciteInputNumberInput:this.handleChannelInput,onKeyDown:this.handleKeyDown,scale:this.scale==="l"?"m":"s",style:{marginLeft:n>0&&!(this.scale==="s"&&this.alphaChannel&&n===3)?"-1px":""},suffixText:s,value:t==null?void 0:t.toString()}),this.deleteColor=()=>{const t=k(this.color,this.alphaChannel);if(!(this.savedColors.indexOf(t)>-1))return;const o=this.savedColors.filter(s=>s!==t);this.savedColors=o;const r=`${W}${this.storageId}`;this.storageId&&localStorage.setItem(r,JSON.stringify(o))},this.saveColor=()=>{const t=k(this.color,this.alphaChannel);if(this.savedColors.indexOf(t)>-1)return;const o=[...this.savedColors,t];this.savedColors=o;const r=`${W}${this.storageId}`;this.storageId&&localStorage.setItem(r,JSON.stringify(o))},this.drawColorControls=nt((t="all")=>{(t==="all"||t==="color-field")&&this.colorFieldRenderingContext&&this.drawColorField(),(t==="all"||t==="hue-slider")&&this.hueSliderRenderingContext&&this.drawHueSlider(),this.alphaChannel&&(t==="all"||t==="opacity-slider")&&this.opacitySliderRenderingContext&&this.drawOpacitySlider()},Ct),this.captureColorFieldColor=(t,n,o=!0)=>{const{dimensions:{colorField:{height:r,width:s}}}=this,a=Math.round(I.s/s*t),i=Math.round(I.v/r*(r-n));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(a).value(i),o)},this.initColorField=t=>{this.colorFieldRenderingContext=t.getContext("2d"),this.updateCanvasSize("color-field"),this.drawColorControls()},this.initHueSlider=t=>{this.hueSliderRenderingContext=t.getContext("2d"),this.updateCanvasSize("hue-slider"),this.drawHueSlider()},this.initOpacitySlider=t=>{t&&(this.opacitySliderRenderingContext=t.getContext("2d"),this.updateCanvasSize("opacity-slider"),this.drawOpacitySlider())},this.storeOpacityScope=t=>{this.opacityScopeNode=t},this.handleOpacityScopeKeyDown=t=>{const n=t.shiftKey?10:1,{key:o}=t,r={ArrowUp:.01,ArrowRight:.01,ArrowDown:-.01,ArrowLeft:-.01};if(r[o]){t.preventDefault();const s=r[o]*n,a=this.baseColorFieldColor.alpha(),i=this.baseColorFieldColor.alpha(a+s);this.internalColorSet(i,!1)}},this.allowEmpty=!1,this.alphaChannel=!1,this.channelsDisabled=!1,this.clearable=!1,this.color=M,this.disabled=!1,this.format="auto",this.hideChannels=!1,this.hexDisabled=!1,this.hideHex=!1,this.hideSaved=!1,this.savedDisabled=!1,this.scale="m",this.storageId=void 0,this.messageOverrides=void 0,this.numberingSystem=void 0,this.value=A(k(M,this.alphaChannel)),this.defaultMessages=void 0,this.channelMode="rgb",this.channels=this.toChannels(M),this.dimensions=ue.m,this.effectiveLocale="",this.messages=void 0,this.savedColors=[],this.colorFieldScopeTop=void 0,this.colorFieldScopeLeft=void 0,this.hueScopeLeft=void 0,this.opacityScopeLeft=void 0,this.scopeOrientation=void 0}handleAllowEmptyOrClearableChange(){this.isClearable=this.clearable||this.allowEmpty}handleAlphaChannelChange(e){const{format:t}=this;e&&t!=="auto"&&!U(t)&&(console.warn(`ignoring alphaChannel as the current format (${t}) does not support alpha`),this.alphaChannel=!1)}handleColorChange(e,t){this.drawColorControls(),this.updateChannelsFromColor(e),this.previousColor=t}handleFormatOrAlphaChannelChange(){this.setMode(this.format),this.internalColorSet(this.color,!1,"internal")}handleScaleChange(e="m"){this.updateDimensions(e),this.updateCanvasSize("all"),this.drawColorControls()}onMessagesChange(){}handleValueChange(e,t){const{isClearable:n,format:o}=this,r=!n||e;let s=!1;if(r){const c=ie(e);if(!c||o!=="auto"&&c!==o){this.showIncompatibleColorWarning(e,o),this.value=t;return}s=this.mode!==c,this.setMode(c,this.internalColorUpdateContext===null)}const a=this.activeCanvasInfo;if(this.internalColorUpdateContext==="initial")return;if(this.internalColorUpdateContext==="user-interaction"){this.calciteColorPickerInput.emit(),a||this.calciteColorPickerChange.emit();return}const i=n&&!e?null:F(e!=null&&typeof e=="object"&&U(this.mode)?Ee(e):e),l=!ae(i,this.color);(s||l)&&this.internalColorSet(i,this.alphaChannel&&!(this.mode.endsWith("a")||this.mode.endsWith("a-css")),"internal")}get baseColorFieldColor(){return this.color||this.previousColor||M}effectiveLocaleChange(){Qe(this,this.effectiveLocale)}handleChannelKeyUpOrDown(e){this.shiftKeyChannelAdjustment=0;const{key:t}=e;if(t!=="ArrowUp"&&t!=="ArrowDown"||!e.composedPath().some(r=>{var s;return(s=r.classList)==null?void 0:s.contains(f.channel)}))return;const{shiftKey:n}=e;if(e.preventDefault(),!this.color){this.internalColorSet(this.previousColor),e.stopPropagation();return}const o=9;this.shiftKeyChannelAdjustment=t==="ArrowUp"&&n?o:t==="ArrowDown"&&n?-o:0}async setFocus(){await be(this),this.el.focus()}async componentWillLoad(){Ce(this),this.handleAllowEmptyOrClearableChange();const{isClearable:e,color:t,format:n,value:o}=this,r=e&&!o,s=ie(o),a=r||n==="auto"&&s||n===s,i=r?null:a?F(o):t;a||this.showIncompatibleColorWarning(o,n),this.setMode(n,!1),this.internalColorSet(i,!1,"initial"),this.updateDimensions(this.scale);const l=`${W}${this.storageId}`;this.storageId&&localStorage.getItem(l)&&(this.savedColors=JSON.parse(localStorage.getItem(l))),await Ze(this)}connectedCallback(){je(this),Xe(this),et(this)}componentDidLoad(){ve(this)}disconnectedCallback(){window.removeEventListener("pointermove",this.globalPointerMoveHandler),window.removeEventListener("pointerup",this.globalPointerUpHandler),Ve(this),Ge(this),tt(this)}componentDidRender(){Be(this)}render(){const{channelsDisabled:e,color:t,colorFieldScopeLeft:n,colorFieldScopeTop:o,dimensions:{slider:{width:r},thumb:{radius:s}},hexDisabled:a,hideChannels:i,hideHex:l,hideSaved:c,hueScopeLeft:u,messages:g,alphaChannel:v,opacityScopeLeft:m,savedColors:p,savedDisabled:b,scale:x,scopeOrientation:D}=this,q=t?k(t,v):null,Se=s,ke=u??r*M.hue()/I.h,Ie=s,Fe=m??r*N(M.alpha())/z.max,ee=t===null,_=D==="vertical",te=a||l,ne=e||i,Ae=b||c,[Me,Oe]=this.getAdjustedScopePosition(n,o),[ze,Pe]=this.getAdjustedScopePosition(ke,Se),[De,Te]=this.getAdjustedScopePosition(Fe,Ie);return d(_e,{disabled:this.disabled},d("div",{class:f.container},d("div",{class:f.controlAndScope},d("canvas",{class:f.colorField,onPointerDown:this.handleColorFieldPointerDown,ref:this.initColorField}),d("div",{"aria-label":_?g.value:g.saturation,"aria-valuemax":_?I.v:I.s,"aria-valuemin":"0","aria-valuenow":(_?t==null?void 0:t.saturationv():t==null?void 0:t.value())||"0",class:{[f.scope]:!0,[f.colorFieldScope]:!0},onKeyDown:this.handleColorFieldScopeKeyDown,role:"slider",style:{top:`${Oe||0}px`,left:`${Me||0}px`},tabindex:"0",ref:this.storeColorFieldScope})),d("div",{class:f.previewAndSliders},d("calcite-color-picker-swatch",{class:f.preview,color:q,scale:"l"}),d("div",{class:f.sliders},d("div",{class:f.controlAndScope},d("canvas",{class:{[f.slider]:!0,[f.hueSlider]:!0},onPointerDown:this.handleHueSliderPointerDown,ref:this.initHueSlider}),d("div",{"aria-label":g.hue,"aria-valuemax":I.h,"aria-valuemin":"0","aria-valuenow":(t==null?void 0:t.round().hue())||M.round().hue(),class:{[f.scope]:!0,[f.hueScope]:!0},onKeyDown:this.handleHueScopeKeyDown,role:"slider",style:{top:`${Pe}px`,left:`${ze}px`},tabindex:"0",ref:this.storeHueScope})),v?d("div",{class:f.controlAndScope},d("canvas",{class:{[f.slider]:!0,[f.opacitySlider]:!0},onPointerDown:this.handleOpacitySliderPointerDown,ref:this.initOpacitySlider}),d("div",{"aria-label":g.opacity,"aria-valuemax":z.max,"aria-valuemin":z.min,"aria-valuenow":(t||M).round().alpha(),class:{[f.scope]:!0,[f.opacityScope]:!0},onKeyDown:this.handleOpacityScopeKeyDown,role:"slider",style:{top:`${Te}px`,left:`${De}px`},tabindex:"0",ref:this.storeOpacityScope})):null)),te&&ne?null:d("div",{class:{[f.controlSection]:!0,[f.section]:!0}},d("div",{class:f.hexAndChannelsGroup},te?null:d("div",{class:f.hexOptions},d("calcite-color-picker-hex-input",{allowEmpty:this.isClearable,alphaChannel:v,class:f.control,messages:g,numberingSystem:this.numberingSystem,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:x,value:q})),ne?null:d("calcite-tabs",{class:{[f.colorModeContainer]:!0,[f.splitSection]:!0},scale:x==="l"?"m":"s"},d("calcite-tab-nav",{slot:"title-group"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv")))),Ae?null:d("div",{class:{[f.savedColorsSection]:!0,[f.section]:!0}},d("div",{class:f.header},d("label",null,g.saved),d("div",{class:f.savedColorsButtons},d("calcite-button",{appearance:"transparent",class:f.deleteColor,disabled:ee,iconStart:"minus",kind:"neutral",label:g.deleteColor,onClick:this.deleteColor,scale:x,type:"button"}),d("calcite-button",{appearance:"transparent",class:f.saveColor,disabled:ee,iconStart:"plus",kind:"neutral",label:g.saveColor,onClick:this.saveColor,scale:x,type:"button"}))),p.length>0?d("div",{class:f.savedColors},[...p.map(oe=>d("calcite-color-picker-swatch",{class:f.savedColor,color:oe,key:oe,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:x,tabIndex:0}))]):null)))}handleKeyDown(e){e.key==="Enter"&&e.preventDefault()}showIncompatibleColorWarning(e,t){console.warn(`ignoring color value (${e}) as it is not compatible with the current format (${t})`)}setMode(e,t=!0){const n=e==="auto"?this.mode:e;this.mode=this.ensureCompatibleMode(n,t)}ensureCompatibleMode(e,t){const{alphaChannel:n}=this,o=U(e);if(n&&!o){const r=Ne(e);return t&&console.warn(`setting format to (${r}) as the provided one (${e}) does not support alpha`),r}if(!n&&o){const r=le(e);return t&&console.warn(`setting format to (${r}) as the provided one (${e}) does not support alpha`),r}return e}captureHueSliderColor(e){const{dimensions:{slider:{width:t}}}=this,n=de/t*e;this.internalColorSet(this.baseColorFieldColor.hue(n),!1)}captureOpacitySliderValue(e){const{dimensions:{slider:{width:t}}}=this,n=V(z.max/t*e);this.internalColorSet(this.baseColorFieldColor.alpha(n),!1)}internalColorSet(e,t=!0,n="user-interaction"){t&&ae(e,this.color)||(this.internalColorUpdateContext=n,this.color=e,this.value=this.toValue(e),this.internalColorUpdateContext=null)}toValue(e,t=this.mode){if(!e)return null;if(t.includes("hex")){const r=t===se.HEXA;return A(k(e.round(),r),r)}if(t.includes("-css")){const r=e[t.replace("-css","").replace("a","")]().round().string();if((t.endsWith("a")||t.endsWith("a-css"))&&e.alpha()===1){const a=r.slice(0,3),i=r.slice(4,-1);return`${a}a(${i}, ${e.alpha()})`}return r}const o=e[le(t)]().round().object();return t.endsWith("a")?Ke(o):o}getSliderCapSpacing(){const{dimensions:{slider:{height:e},thumb:{radius:t}}}=this;return t*2-e}updateDimensions(e="m"){this.dimensions=ue[e]}drawColorField(){const e=this.colorFieldRenderingContext,{dimensions:{colorField:{height:t,width:n}}}=this;e.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).alpha(1).string(),e.fillRect(0,0,n,t);const o=e.createLinearGradient(0,0,n,0);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=o,e.fillRect(0,0,n,t);const r=e.createLinearGradient(0,0,0,t);r.addColorStop(0,"rgba(0,0,0,0)"),r.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=r,e.fillRect(0,0,n,t),this.drawActiveColorFieldColor()}setCanvasContextSize(e,{height:t,width:n}){if(!e)return;const o=window.devicePixelRatio||1;e.width=n*o,e.height=t*o,e.style.height=`${t}px`,e.style.width=`${n}px`,e.getContext("2d").scale(o,o)}updateCanvasSize(e="all"){var o,r,s;const{dimensions:t}=this;(e==="all"||e==="color-field")&&this.setCanvasContextSize((o=this.colorFieldRenderingContext)==null?void 0:o.canvas,t.colorField);const n={width:t.slider.width,height:t.slider.height+(t.thumb.radius-t.slider.height/2)*2};(e==="all"||e==="hue-slider")&&this.setCanvasContextSize((r=this.hueSliderRenderingContext)==null?void 0:r.canvas,n),(e==="all"||e==="opacity-slider")&&this.setCanvasContextSize((s=this.opacitySliderRenderingContext)==null?void 0:s.canvas,n)}drawActiveColorFieldColor(){const{color:e}=this;if(!e)return;const t=e.hsv(),{dimensions:{colorField:{height:n,width:o},thumb:{radius:r}}}=this,s=t.saturationv()/(I.s/o),a=n-t.value()/(I.v/n);requestAnimationFrame(()=>{this.colorFieldScopeLeft=s,this.colorFieldScopeTop=a}),this.drawThumb(this.colorFieldRenderingContext,r,s,a,t,!1)}drawThumb(e,t,n,o,r,s){const i=2*Math.PI,l=1;if(e.beginPath(),e.arc(n,o,t,0,i),e.fillStyle="#fff",e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=l,e.stroke(),s&&r.alpha()<1){const u=e.createPattern(this.getCheckeredBackgroundPattern(),"repeat");e.beginPath(),e.arc(n,o,t-3,0,i),e.fillStyle=u,e.fill()}e.globalCompositeOperation="source-atop",e.beginPath(),e.arc(n,o,t-3,0,i);const c=s?r.alpha():1;e.fillStyle=r.rgb().alpha(c).string(),e.fill(),e.globalCompositeOperation="source-over"}drawActiveHueSliderColor(){const{color:e}=this;if(!e)return;const t=e.hsv().saturationv(100).value(100),{dimensions:{slider:{width:n},thumb:{radius:o}}}=this,r=t.hue()/(de/n),s=o,a=this.getSliderBoundX(r,n,o);requestAnimationFrame(()=>{this.hueScopeLeft=a}),this.drawThumb(this.hueSliderRenderingContext,o,a,s,t,!1)}drawHueSlider(){const e=this.hueSliderRenderingContext,{dimensions:{slider:{height:t,width:n},thumb:{radius:o}}}=this,r=0,s=o-t/2,a=e.createLinearGradient(0,0,n,0),i=["red","yellow","lime","cyan","blue","magenta","#ff0004"],l=1/(i.length-1);let c=0;i.forEach(u=>{a.addColorStop(c,F(u).string()),c+=l}),e.clearRect(0,0,n,t+this.getSliderCapSpacing()*2),this.drawSliderPath(e,t,n,r,s),e.fillStyle=a,e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=1,e.stroke(),this.drawActiveHueSliderColor()}drawOpacitySlider(){const e=this.opacitySliderRenderingContext,{baseColorFieldColor:t,dimensions:{slider:{height:n,width:o},thumb:{radius:r}}}=this,s=0,a=r-n/2;e.clearRect(0,0,o,n+this.getSliderCapSpacing()*2);const i=e.createLinearGradient(0,a,o,0),l=t.rgb().alpha(0),c=t.rgb().alpha(.5),u=t.rgb().alpha(1);i.addColorStop(0,l.string()),i.addColorStop(.5,c.string()),i.addColorStop(1,u.string()),this.drawSliderPath(e,n,o,s,a);const g=e.createPattern(this.getCheckeredBackgroundPattern(),"repeat");e.fillStyle=g,e.fill(),e.fillStyle=i,e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=1,e.stroke(),this.drawActiveOpacitySliderColor()}drawSliderPath(e,t,n,o,r){const s=t/2+1;e.beginPath(),e.moveTo(o+s,r),e.lineTo(o+n-s,r),e.quadraticCurveTo(o+n,r,o+n,r+s),e.lineTo(o+n,r+t-s),e.quadraticCurveTo(o+n,r+t,o+n-s,r+t),e.lineTo(o+s,r+t),e.quadraticCurveTo(o,r+t,o,r+t-s),e.lineTo(o,r+s),e.quadraticCurveTo(o,r,o+s,r),e.closePath()}getCheckeredBackgroundPattern(){if(this.checkerPattern)return this.checkerPattern;const e=document.createElement("canvas");e.width=10,e.height=10;const t=e.getContext("2d");return t.fillStyle="#ccc",t.fillRect(0,0,10,10),t.fillStyle="#fff",t.fillRect(0,0,5,5),t.fillRect(5,5,5,5),this.checkerPattern=e,e}drawActiveOpacitySliderColor(){const{color:e}=this;if(!e)return;const t=e,{dimensions:{slider:{width:n},thumb:{radius:o}}}=this,r=N(t.alpha())/(z.max/n),s=o,a=this.getSliderBoundX(r,n,o);requestAnimationFrame(()=>{this.opacityScopeLeft=a}),this.drawThumb(this.opacitySliderRenderingContext,o,a,s,t,!0)}getSliderBoundX(e,t,n){const o=Je(e,t,n);return o===0?e:o===-1?ce(e,0,t,n,n*2):ce(e,0,t,t-n*2,t-n)}updateColorFromChannels(e){this.internalColorSet(F(e,this.channelMode))}updateChannelsFromColor(e){this.channels=e?this.toChannels(e):[null,null,null,null]}toChannels(e){const{channelMode:t}=this,n=e[t]().array().map((o,r)=>r===3?o:Math.floor(o));return n.length===3&&n.push(1),n}getAdjustedScopePosition(e,t){return[e-pe/2,t-pe/2]}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return Z(this)}static get watchers(){return{allowEmpty:["handleAllowEmptyOrClearableChange"],clearable:["handleAllowEmptyOrClearableChange"],alphaChannel:["handleAlphaChannelChange","handleFormatOrAlphaChannelChange"],color:["handleColorChange"],format:["handleFormatOrAlphaChannelChange"],scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}}};vt.style=bt;const X={container:"container",hexInput:"hex-input",opacityInput:"opacity-input"},yt=":host{display:block}.container{display:flex;inline-size:100%;flex-wrap:nowrap;align-items:center}.hex-input{flex-grow:1;text-transform:uppercase}.opacity-input{inline-size:68px;margin-inline-start:-1px}:host([scale=s]) .container{flex-wrap:wrap;row-gap:0.125rem}:host([scale=s]) .opacity-input{inline-size:unset;margin-inline-start:unset}:host([scale=l]) .opacity-input{inline-size:88px}:host([hidden]){display:none}[hidden]{display:none}",fe=F(),wt=class{constructor(e){Q(this,e),this.calciteColorPickerHexInputChange=G(this,"calciteColorPickerHexInputChange",6),this.onHexInputBlur=()=>{const t=this.hexInputNode,n=t.value,o=`#${n}`,{allowEmpty:r,internalColor:s}=this,a=r&&!n,i=qe(o);this.onHexInputChange(),!(a||L(o)&&i)&&(t.value=r&&!s?"":this.formatHexForInternalInput($e(s.object())))},this.onOpacityInputBlur=()=>{const t=this.opacityInputNode,n=t.value,{allowEmpty:o,internalColor:r}=this;o&&!n||(t.value=o&&!r?"":this.formatOpacityForInternalInput(r))},this.onHexInputChange=()=>{let n=this.hexInputNode.value;if(n){const o=A(n,!1);if(L(o)&&this.alphaChannel&&this.internalColor){const s=A(this.internalColor.hexa(),!0).slice(-2);n=`${o+s}`}}this.internalSetValue(n,this.value)},this.onOpacityInputChange=()=>{var o;const t=this.opacityInputNode;let n;if(!t.value)n=t.value;else{const r=V(Number(t.value));n=(o=this.internalColor)==null?void 0:o.alpha(r).hexa()}this.internalSetValue(n,this.value)},this.onInputKeyDown=t=>{const{altKey:n,ctrlKey:o,metaKey:r,shiftKey:s}=t,{alphaChannel:a,hexInputNode:i,internalColor:l,value:c}=this,{key:u}=t,g=t.composedPath();if(u==="Tab"||u==="Enter"){g.includes(i)?this.onHexInputChange():this.onOpacityInputChange(),u==="Enter"&&t.preventDefault();return}const v=u==="ArrowDown"||u==="ArrowUp",m=this.value;if(v){if(!c){this.internalSetValue(this.previousNonNullValue,m),t.preventDefault();return}const D=u==="ArrowUp"?1:-1,q=s?10:1;this.internalSetValue(k(this.nudgeRGBChannels(l,q*D,g.includes(i)?"rgb":"a"),a),m),t.preventDefault();return}const p=n||o||r,b=u.length===1,x=Ue.test(u);b&&!p&&!x&&t.preventDefault()},this.onHexInputPaste=t=>{const n=t.clipboardData.getData("text");L(n)&&(t.preventDefault(),this.hexInputNode.value=n.slice(1))},this.previousNonNullValue=this.value,this.storeHexInputRef=t=>{this.hexInputNode=t},this.storeOpacityInputRef=t=>{this.opacityInputNode=t},this.allowEmpty=!1,this.alphaChannel=!1,this.hexLabel="Hex",this.messages=void 0,this.numberingSystem=void 0,this.scale="m",this.value=A(k(fe,this.alphaChannel),this.alphaChannel,!0),this.internalColor=fe}connectedCallback(){const{allowEmpty:e,alphaChannel:t,value:n}=this;if(n){const o=A(n,t);L(o,t)&&this.internalSetValue(o,o,!1);return}e&&this.internalSetValue(null,null,!1)}componentWillLoad(){Ce(this)}componentDidLoad(){ve(this)}handleValueChange(e,t){this.internalSetValue(e,t,!1)}render(){const{alphaChannel:e,hexLabel:t,internalColor:n,messages:o,scale:r,value:s}=this,a=this.formatHexForInternalInput(s),i=this.formatOpacityForInternalInput(n),l=r==="l"?"m":"s";return d("div",{class:X.container},d("calcite-input-text",{class:X.hexInput,label:(o==null?void 0:o.hex)||t,maxLength:6,onCalciteInputTextChange:this.onHexInputChange,onCalciteInternalInputTextBlur:this.onHexInputBlur,onKeyDown:this.onInputKeyDown,onPaste:this.onHexInputPaste,prefixText:"#",scale:l,value:a,ref:this.storeHexInputRef}),e?d("calcite-input-number",{class:X.opacityInput,key:"opacity-input",label:o==null?void 0:o.opacity,max:z.max,maxLength:3,min:z.min,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputNumberChange:this.onOpacityInputChange,onCalciteInternalInputNumberBlur:this.onOpacityInputBlur,onKeyDown:this.onInputKeyDown,scale:l,suffixText:"%",value:i,ref:this.storeOpacityInputRef}):null)}async setFocus(){return await be(this),Le(this.hexInputNode)}internalSetValue(e,t,n=!0){if(e){const{alphaChannel:o}=this,r=A(e,o,o);if(L(r,o)){const{internalColor:s}=this,a=F(r),i=A(k(a,o),o),l=!s||i!==A(k(s,o),o);this.internalColor=a,this.previousNonNullValue=i,this.value=i,l&&n&&this.calciteColorPickerHexInputChange.emit();return}}else if(this.allowEmpty){this.internalColor=null,this.value=null,n&&this.calciteColorPickerHexInputChange.emit();return}this.value=t}formatHexForInternalInput(e){return e?e.replace("#","").slice(0,6):""}formatOpacityForInternalInput(e){return e?`${N(e.alpha())}`:""}nudgeRGBChannels(e,t,n){let o;const r=e.array(),s=r.slice(0,3);if(n==="rgb")o=[...s.map(i=>i+t),this.alphaChannel?r[3]:void 0];else{const a=V(N(e.alpha())+t);o=[...s,a]}return F(o)}get el(){return Z(this)}static get watchers(){return{value:["handleValueChange"]}}};wt.style=yt;const j={swatch:"swatch",noColorSwatch:"swatch--no-color",checker:"checker"},ge={borderLight:"rgba(0, 0, 0, 0.3)",borderDark:"rgba(255, 255, 255, 0.15)"},me=4,O={squareSize:me,size:me*2},xt=":host{position:relative;display:inline-flex}:host([scale=s]){block-size:1.25rem;inline-size:1.25rem}:host([scale=m]){block-size:1.5rem;inline-size:1.5rem}:host([scale=l]){block-size:2rem;inline-size:2rem}.swatch{overflow:hidden;block-size:inherit;inline-size:inherit}.swatch rect{transition-property:all;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.swatch--no-color rect{fill:var(--calcite-color-foreground-1)}.swatch--no-color line{stroke:var(--calcite-color-status-danger)}.checker{fill:#cacaca}:host([hidden]){display:none}[hidden]{display:none}",St=class{constructor(e){Q(this,e),this.active=!1,this.color=void 0,this.scale="m"}handleColorChange(e){this.internalColor=e?F(e):null}componentWillLoad(){this.handleColorChange(this.color)}render(){const e=!this.internalColor,t={[j.swatch]:!0,[j.noColorSwatch]:e};return d("svg",{class:t,xmlns:"http://www.w3.org/2000/svg"},this.renderSwatch())}renderSwatch(){const{active:e,el:t,internalColor:n}=this,o=e?"100%":"0",s=Re(t)==="light"?ge.borderLight:ge.borderDark,a={height:"100%",rx:o,stroke:s,"stroke-width":"2",width:"100%"};if(!n)return d(re,null,d("clipPath",{id:"shape"},d("rect",{height:"100%",rx:o,width:"100%"})),d("rect",{"clip-path":`inset(0 round ${o})`,rx:o,...a}),d("line",{"clip-path":"url(#shape)","stroke-width":"3",x1:"100%",x2:"0",y1:"0",y2:"100%"}));const l=n.alpha(),c=k(n),u=k(n,l<1);return d(re,null,d("title",null,u),d("defs",null,d("pattern",{height:O.size,id:"checker",patternUnits:"userSpaceOnUse",width:O.size,x:"0",y:"0"},d("rect",{class:j.checker,height:O.squareSize,width:O.squareSize,x:"0",y:"0"}),d("rect",{class:j.checker,height:O.squareSize,width:O.squareSize,x:O.squareSize,y:O.squareSize}))),d("rect",{fill:"url(#checker)",height:"100%",rx:o,width:"100%"}),d("rect",{fill:c,style:{"clip-path":l<1?"polygon(100% 0, 0 0, 0 100%)":`inset(0 round ${o})`},...a}),l<1?d("rect",{fill:u,key:"opacity-fill",style:{"clip-path":"polygon(100% 0, 100% 100%, 0 100%)"},...a}):null)}get el(){return Z(this)}static get watchers(){return{color:["handleColorChange"]}}};St.style=xt;export{vt as calcite_color_picker,wt as calcite_color_picker_hex_input,St as calcite_color_picker_swatch};
