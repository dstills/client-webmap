import{D as o,c1 as g,hr as p,hs as v,bE as w}from"./index-nBWeBKPv.js";import{r as d}from"./serverVersionUtils-9uFumxhl.js";const i=new Map;async function m(r,s,a,h){i.has(r)||await d(i,r);const e=i.get(r);if(((e==null?void 0:e.serverVersion)??0)<=11.1)throw new o("alterVersion:enterprise-version","versioning API requires ArcGIS Enterprise version 11.2 or higher");if(!s)throw new o("alterVersion:missing-guid","guid for version is missing");const t=g(r),c=a.toJSON(),f=p(t.query,{query:v({...c,f:"json"}),...h,authMode:"immediate",method:"post"});s.startsWith("{")&&(s=s.slice(1,-1));const u=`${t.path}/versions/${s}/alter`,{data:n}=await w(u,f);return!!n&&n.success}export{m as alterVersion,i as serverVersionCacheMap};
