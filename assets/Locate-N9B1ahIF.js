function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/calcite-button-BEiwyGvk.js","assets/button-CTlumxno.js","assets/index-BS4ejk0L.js","assets/index-DvE0Cji0.css","assets/calcite-loader-MUF21uuE.js","assets/calcite-tooltip-Bj99OQQL.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{E as i,F as a,J as E,nM as O,b as w,nN as C,bs as I,nO as P,c_ as N,j0 as b,nL as S,j1 as $,j2 as A,_ as p,lm as _,aT as f,j3 as c,nF as y,c3 as D}from"./index-BS4ejk0L.js";import{r as x}from"./actions-CRREDKJI.js";import{b as G}from"./GeolocationPositioning-BTprjP2-.js";async function j(){const e=await P("esri/widgets/Locate/t9n/Locate");return new N({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[x.clone()],content:[{type:"fields"}]})}let s=class extends G{constructor(t){super(t),this._locateController=null,this.error=void 0,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([O(()=>{var n;const{graphic:t,view:o}=this;if(!t)return;((n=o==null?void 0:o.graphics)==null?void 0:n.includes(t))&&this._updatePopupTemplate(t)})])}destroy(){this.cancelLocate()}get state(){var t;return this._geolocationUsable?(t=this.view)!=null&&t.ready?this._locateController?"locating":this.error!=null?"error":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new w("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new w("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const t=new AbortController;this._locateController=t,this.error=void 0;try{const o=await C(this.geolocationOptions);if(await this.updatePosition(o,t),this._locateController!==t)return null;const{graphic:r}=this;return r&&await this._updatePopupTemplate(r),this._addGraphic(),this.emit("locate",{position:o}),this._locateController=null,o}catch(o){if(I(o))return null;throw t===this._locateController&&(this._locateController=null),this.error=o,this.emit("locate-error",{error:o}),o}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(t){if(!this.popupEnabled)return;const o=await j(),r=t!==this.graphic;this.destroyed||r||(t.popupTemplate=o)}};i([a()],s.prototype,"_locateController",void 0),i([a()],s.prototype,"error",void 0),i([a()],s.prototype,"popupEnabled",void 0),i([a({readOnly:!0})],s.prototype,"state",null),i([a()],s.prototype,"locate",null),i([a()],s.prototype,"cancelLocate",null),s=i([E("esri.widgets.Locate.LocateViewModel")],s);const L=s,u={base:"esri-locate",widgetIcon:D.northNavigation},k="gps-off";let l=class extends ${constructor(e,t){super(e,t),this.iconClass=u.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new L,this._locate=()=>{const{viewModel:o}=this;o.state==="locating"?o.cancelLocate():o.locate().catch(()=>{})}}loadDependencies(){return A({button:()=>p(()=>import("./calcite-button-BEiwyGvk.js"),__vite__mapDeps([0,1,2,3])),loader:()=>p(()=>import("./calcite-loader-MUF21uuE.js"),__vite__mapDeps([4,2,3])),tooltip:()=>p(()=>import("./calcite-tooltip-Bj99OQQL.js"),__vite__mapDeps([5,2,3]))})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(e){this.viewModel.geolocationOptions=e}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(e){this.viewModel.goToLocationEnabled=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get rotationEnabled(){return _(f.getLogger(this),"rotationEnabled",{replacement:"use Track widget",version:"4.29",warnOnce:!0}),this.viewModel.rotationEnabled}set rotationEnabled(e){_(f.getLogger(this),"rotationEnabled",{replacement:"use Track widget",version:"4.29",warnOnce:!0}),this.viewModel.rotationEnabled=e}get scale(){return this.viewModel.scale}set scale(e){this.viewModel.scale=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}cancelLocate(){this.viewModel.cancelLocate()}locate(){return this.viewModel.locate()}render(){var v;const{viewModel:e,icon:t,iconClass:o}=this,{state:r}=e,n=r==="locating",h=n?this.messagesCommon.cancel:this.messages.title,M=r==="feature-unsupported",d=o===u.widgetIcon?void 0:o,T=d===void 0?k:void 0,g=t==null&&d,m=this._localizeError((v=this.viewModel)==null?void 0:v.error);return c("div",{class:this.classes(u.base,y.widget)},!M&&c("calcite-button",{class:y.widgetButton,disabled:r==="disabled",iconStart:n?void 0:t??T,kind:"neutral",label:h,onclick:this._locate,scale:g?"s":"m",title:h},n?c("calcite-loader",{inline:!0,label:"",scale:"m"}):g?this._renderLegacyIcon(d):null),m?c("calcite-tooltip",{open:!0,overlayPositioning:"fixed",referenceElement:this.container},m):null)}_renderLegacyIcon(e){return c("span",{"aria-hidden":"true",class:e,styles:{display:"flex"}})}_localizeError(e){var t,o,r;return e instanceof GeolocationPositionError?e.code===GeolocationPositionError.PERMISSION_DENIED?(t=this.messages)==null?void 0:t.permissionError:e.code===GeolocationPositionError.TIMEOUT?(o=this.messages)==null?void 0:o.timeoutError:(r=this.messages)==null?void 0:r.positionUnavailable:e instanceof Error?e.message:void 0}};i([a()],l.prototype,"geolocationOptions",null),i([a()],l.prototype,"goToLocationEnabled",null),i([a()],l.prototype,"goToOverride",null),i([a()],l.prototype,"graphic",null),i([a()],l.prototype,"iconClass",void 0),i([a()],l.prototype,"icon",void 0),i([a()],l.prototype,"label",null),i([a(),b("esri/widgets/Locate/t9n/Locate")],l.prototype,"messages",void 0),i([a(),b("esri/t9n/common")],l.prototype,"messagesCommon",void 0),i([a()],l.prototype,"popupEnabled",null),i([a()],l.prototype,"rotationEnabled",null),i([a()],l.prototype,"scale",null),i([a()],l.prototype,"view",null),i([a({type:L}),S(["locate","locate-error"])],l.prototype,"viewModel",void 0),l=i([E("esri.widgets.Locate")],l);const U=l;export{U as default};
