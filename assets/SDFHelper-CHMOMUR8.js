import{fX as q,kC as V,gp as D,kD as G}from"./index-nBWeBKPv.js";function U(n){var t;switch(n.type){case"CIMPointSymbol":{const l=n.symbolLayers;if(!l||l.length!==1)return null;const o=l[0];return o.type!=="CIMVectorMarker"?null:U(o)}case"CIMVectorMarker":{const l=n.markerGraphics;if(!l||l.length!==1)return null;const o=l[0];if(!o)return null;const s=o.geometry;if(!s)return null;const r=o.symbol;return!r||r.type!=="CIMPolygonSymbol"&&r.type!=="CIMLineSymbol"||(t=r.symbolLayers)!=null&&t.some(e=>!!e.effects)?null:{type:"sdf",geom:s,asFill:r.type==="CIMPolygonSymbol"}}}}function X(n){return n?n.rings?n.rings:n.paths?n.paths:n.xmin!==void 0&&n.ymin!==void 0&&n.xmax!==void 0&&n.ymax!==void 0?[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]:null:null}function $(n){let t=1/0,l=-1/0,o=1/0,s=-1/0;for(const r of n)for(const e of r)e[0]<t&&(t=e[0]),e[0]>l&&(l=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1]);return new G(t,o,l-t,s-o)}function A(n){let t=1/0,l=-1/0,o=1/0,s=-1/0;for(const r of n)for(const e of r)e[0]<t&&(t=e[0]),e[0]>l&&(l=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1]);return[t,o,l,s]}function H(n){return n?n.rings?A(n.rings):n.paths?A(n.paths):q(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function J(n,t,l,o,s){const[r,e,i,u]=n;if(i<r||u<e)return[0,0,0,1];const a=i-r,f=u-e,m=128,c=V,M=Math.floor(.5*(.5*m-c)),h=(m-2*(M+c))/Math.max(a,f),p=Math.round(a*h)+2*M,d=Math.round(f*h)+2*M;let b=1;t&&(b=d/h/(t.ymax-t.ymin));let x=0,g=0,y=1;o&&(s?t&&l&&t.ymax-t.ymin>0&&(y=(t.xmax-t.xmin)/(t.ymax-t.ymin),x=o.x/(l*y),g=o.y/l):(x=o.x,g=o.y)),t&&(x=.5*(t.xmax+t.xmin)+x*(t.xmax-t.xmin),g=.5*(t.ymax+t.ymin)+g*(t.ymax-t.ymin)),x-=r,g-=e,x*=h,g*=h,x+=M,g+=M;let C=x/p-.5,k=g/d-.5;return s&&l&&(C*=l*y,k*=l),[b,C,k,y]}function K(n){const t=X(n.geom),l=$(t),o=128,s=V,r=Math.floor(.5*(.5*o-s)),e=(o-2*(r+s))/Math.max(l.width,l.height),i=Math.round(l.width*e)+2*r,u=Math.round(l.height*e)+2*r,a=[];for(const m of t)if(m&&m.length>1){const c=[];for(const M of m){let[h,p]=M;h-=l.x,p-=l.y,h*=e,p*=e,h+=r-.5,p+=r-.5,n.asFill?c.push([h,p]):c.push([Math.round(h),Math.round(p)])}if(n.asFill){const M=c.length-1;c[0][0]===c[M][0]&&c[0][1]===c[M][1]||c.push(c[0])}a.push(c)}const f=j(a,i,u,r);return n.asFill&&z(a,i,u,r,f),[B(f,r),i,u]}function j(n,t,l,o){const s=t*l,r=new Array(s),e=o*o+1;for(let i=0;i<s;++i)r[i]=e;for(const i of n){const u=i.length;for(let a=1;a<u;++a){const f=i[a-1],m=i[a];let c,M,h,p;f[0]<m[0]?(c=f[0],M=m[0]):(c=m[0],M=f[0]),f[1]<m[1]?(h=f[1],p=m[1]):(h=m[1],p=f[1]);let d=Math.floor(c)-o,b=Math.floor(M)+o,x=Math.floor(h)-o,g=Math.floor(p)+o;d<0&&(d=0),b>t&&(b=t),x<0&&(x=0),g>l&&(g=l);const y=m[0]-f[0],C=m[1]-f[1],k=y*y+C*C;for(let w=d;w<b;w++)for(let I=x;I<g;I++){let v,F,S=(w-f[0])*y+(I-f[1])*C;S<0?(v=f[0],F=f[1]):S>k?(v=m[0],F=m[1]):(S/=k,v=f[0]+S*y,F=f[1]+S*C);const L=(w-v)*(w-v)+(I-F)*(I-F),P=(l-I-1)*t+w;L<r[P]&&(r[P]=L)}}}for(let i=0;i<s;++i)r[i]=Math.sqrt(r[i]);return r}function z(n,t,l,o,s){for(const r of n){const e=r.length;for(let i=1;i<e;++i){const u=r[i-1],a=r[i];let f,m,c,M;u[0]<a[0]?(f=u[0],m=a[0]):(f=a[0],m=u[0]),u[1]<a[1]?(c=u[1],M=a[1]):(c=a[1],M=u[1]);let h=Math.floor(f),p=Math.floor(m)+1,d=Math.floor(c),b=Math.floor(M)+1;h<o&&(h=o),p>t-o&&(p=t-o),d<o&&(d=o),b>l-o&&(b=l-o);for(let x=d;x<b;++x){if(u[1]>x==a[1]>x)continue;const g=(l-x-1)*t;for(let y=h;y<p;++y)y<(a[0]-u[0])*(x-u[1])/(a[1]-u[1])+u[0]&&(s[g+y]=-s[g+y]);for(let y=o;y<h;++y)s[g+y]=-s[g+y]}}}}function B(n,t){const l=2*t,o=n.length,s=new Uint8Array(4*o);for(let r=0;r<o;++r){const e=.5-n[r]/l;D(e,s,4*r)}return s}export{K as a,U as e,H as f,J as m};
