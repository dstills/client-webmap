import{g as a,y as n,fd as v,i as x,D as c,ax as E,bk as b,cF as m}from"./index-BhDz4nJ7.js";import{p as F}from"./popupUtils-MZRTyQW5.js";const N=y=>{let e=class extends y{constructor(){super(...arguments),this.view=null}async fetchPopupFeaturesAtLocation(t,s){const{layer:o}=this;if(!t)throw new c("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:o});const{popupEnabled:u}=o,i=F(o,s);if(!u||i==null)throw new c("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:i});const w=await i.getRequiredFields();E(s);const r=new b;r.timeExtent=this.timeExtent,r.geometry=t,r.outFields=w,r.outSpatialReference=t.spatialReference;const{resolution:p,spatialReference:l}=this.view,d=this.view.type==="2d"?new m(p,p,l):new m(.5*p,.5*p,l),{returnTopmostRaster:h,showNoDataRecords:f}=i.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},R={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:d,showNoDataRecords:f,signal:s==null?void 0:s.signal};return o.queryVisibleRasters(r,R).then(g=>g)}canResume(){var t;return!!super.canResume()&&!((t=this.timeExtent)!=null&&t.isEmpty)}};return a([n()],e.prototype,"layer",void 0),a([n()],e.prototype,"suspended",void 0),a([n(v)],e.prototype,"timeExtent",void 0),a([n()],e.prototype,"view",void 0),e=a([x("esri.views.layers.ImageryLayerView")],e),e};export{N as u};
